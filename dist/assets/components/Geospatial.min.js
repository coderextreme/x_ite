/* X_ITE v8.0.0a */(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components");var i=e.n(t);const n=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Fields");var o=e.n(n);const s=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Base/X3DFieldDefinition");var r=e.n(s);const a=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Base/FieldDefinitionArray");var l=e.n(a);const h=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Rendering/X3DCoordinateNode");var c=e.n(h);const d=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Base/X3DConstants");var u=e.n(d);function p(e,t){switch(arguments.length){case 0:this.semiMajorAxis=0,this.semiMinorAxis=0;break;case 2:this.semiMajorAxis=e,this.semiMinorAxis=t;break;case 3:const i=arguments[1];this.semiMajorAxis=e,this.semiMinorAxis=e*(1-1/i)}}p.prototype={constructor:p,getSemiMajorAxis:function(){return this.semiMajorAxis},getSemiMinorAxis:function(){return this.semiMinorAxis},toString:function(){return this.semiMajorAxis+" "+this.semiMinorAxis}};const g=p,_={AA:new g(6377563.396,299.3249646,!0),AM:new g(6377340.189,299.3249646,!0),AN:new g(6378160,298.25,!0),BN:new g(6377483.865,299.1528128,!0),BR:new g(6377397.155,299.1528128,!0),CC:new g(6378206.4,294.9786982,!0),CD:new g(6378249.145,293.465,!0),EA:new g(6377276.345,300.8017,!0),EB:new g(6377298.556,300.8017,!0),EC:new g(6377301.243,300.8017,!0),ED:new g(6377295.664,300.8017,!0),EE:new g(6377304.063,300.8017,!0),EF:new g(6377309.613,300.8017,!0),FA:new g(6378155,298.3,!0),HE:new g(6378200,298.3,!0),HO:new g(6378270,297,!0),ID:new g(6378160,298.247,!0),IN:new g(6378388,297,!0),KA:new g(6378245,298.3,!0),RF:new g(6378137,298.257222101,!0),SA:new g(6378160,298.25,!0),WD:new g(6378135,298.26,!0),WE:new g(6378137,298.257223563,!0),SUN:new g(696342e3,1/9e-6,!0),MERCURY:new g(2439700,2439700),VENUS:new g(6051800,6051800),MOON:new g(1738140,1735970),MARS:new g(3395428,3377678),JUPITER:new g(71492e3,66854e3),SATURN:new g(60268e3,54364e3),URANUS:new g(2555e3,24973e3),NEPTUNE:new g(24764e3,24341e3),PLUTO:new g(1153e3,1153e3)},w=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Numbers/Vector3");var f=e.n(w);const m=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Algorithm");var y=e.n(m);function O(e,t,i){this.longitudeFirst=!t,this.degrees=!i,this.a=e.getSemiMajorAxis(),this.c=e.getSemiMinorAxis(),this.c2a2=Math.pow(e.getSemiMinorAxis()/this.a,2),this.ecc2=1-this.c2a2}O.prototype={constructor:O,convert:function(e,t){const i=e.z;if(this.longitudeFirst)var n=e.y,o=e.x;else n=e.x,o=e.y;return this.degrees&&(n*=Math.PI/180,o*=Math.PI/180),this.convertRadians(n,o,i,t)},convertRadians:function(e,t,i,n){const o=Math.sin(e),s=Math.pow(o,2),r=Math.cos(e),a=this.a/Math.sqrt(1-this.ecc2*s),l=(a+i)*r;return n.set(l*Math.cos(t),l*Math.sin(t),(a*this.c2a2+i)*o)},apply:function(e,t){if(this.applyRadians(e,t),this.degrees&&(t.x*=180/Math.PI,t.y*=180/Math.PI),this.longitudeFirst){const e=t.x;t.x=t.y,t.y=e}return t},applyRadians:function(e,t){const i=e.x,n=e.y,o=e.z,s=Math.sqrt(i*i+n*n);if(0==s)return t.set(Math.PI,0,o-this.c);let r=0,a=Math.atan2(n,i),l=0,h=this.a,c=h,d=this.ecc2;for(let e=0;e<30;++e){const e=l,t=r;r=Math.atan(o/s/(1-d*c/(c+l)));const i=Math.sin(r);if(c=h/Math.sqrt(1-d*i*i),l=s/Math.cos(r)-c,Math.abs(l-e)<.001&&Math.abs(r-t)<1e-10)break}return t.set(r,a,l)},normal:function(e,t){const i=this.applyRadians(e,t),n=i.x,o=i.y,s=Math.cos(n),r=Math.cos(o)*s,a=Math.sin(o)*s,l=Math.sin(n);return t.set(r,a,l)}};const S=O,I=1e7,b=5e5,F=.9996;function v(e,t,i,n){const o=e.getSemiMajorAxis(),s=1-Math.pow(e.getSemiMinorAxis()/o,2),r=s/(1-s),a=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s));this.southernHemisphere=!i,this.eastingFirst=!n,this.a=o,this.ecc2=s,this.EE=r,this.E8=8*r,this.E9=9*r,this.E252=252*r,this.e1=a,this.A=F*(o*(1-s/4-3*s*s/64-5*s*s*s/256)),this.B=3*a/2-7*a*a*a/32,this.C=21*a*a/16-55*a*a*a*a/32,this.D=151*a*a*a/96,this.E=o*(1-s),this.W=1-s/4-3*s*s/64-5*s*s*s/256,this.X=3*s/8+3*s*s/32+45*s*s*s/1024,this.Y=15*s*s/256+45*s*s*s/1024,this.Z=35*s*s*s/3072,this.longitude0=y().radians(6*t-183),this.geodeticConverter=new S(e,!0,!0)}v.prototype={constructor:v,convert:function(e,t){if(this.eastingFirst)var i=e.y,n=e.x;else i=e.x,n=e.y;let o=this.southernHemisphere;i<0&&(o=!this.southernHemisphere,i=-i),o&&(i-=I),n-=b;const s=i/this.A,r=s+this.B*Math.sin(2*s)+this.C*Math.sin(4*s)+this.D*Math.sin(6*s),a=Math.pow(Math.sin(r),2),l=Math.cos(r),h=Math.tan(r),c=this.a/Math.sqrt(1-this.ecc2*a),d=Math.pow(h,2),u=Math.pow(h,8),p=this.EE*d,g=p*p,_=this.E/Math.pow(1-this.ecc2*a,1.5),w=n/(c*F),f=(5+3*d+10*p-4*g-this.E9)*Math.pow(w,4)/24,m=(61+90*d+298*p+45*u-this.E252-3*g)*Math.pow(w,6)/720,y=(5-2*p+28*d-3*g+this.E8+24*u)*Math.pow(w,5)/120,O=r-c*h/_*(w*w/2-f+m),S=this.longitude0+(w-(1+2*d+p)*Math.pow(w,3)/6+y)/l;return this.geodeticConverter.convertRadians(O,S,e.z,t)},apply:function(e,t){const i=this.geodeticConverter.applyRadians(e,t),n=i.x,o=i.y,s=Math.tan(n),r=Math.cos(n),a=this.EE,l=this.a/Math.sqrt(1-this.ecc2*Math.pow(Math.sin(n),2)),h=s*s,c=h*h*h,d=a*r*r,u=r*(o-this.longitude0),p=this.a*(this.W*n-this.X*Math.sin(2*n)+this.Y*Math.sin(4*n)-this.Z*Math.sin(6*n)),g=F*l*(u+(1-h+d)*Math.pow(u,3)/6+(5-18*c+72*d-58*a)*Math.pow(u,5)/120)+b;let _=F*(p+l*s*(u*u/2+(5-h+9*d+4*d*d)*Math.pow(u,4)/24+(61-58*c+600*d-330*a)*Math.pow(u,6)/720));return n<0?(_+=I,this.southernHemisphere||(_=-_)):this.southernHemisphere&&(_=-_),this.eastingFirst?t.set(g,_,i.z):t.set(_,g,i.z)}};const C=v;function x(){}x.prototype={constructor:x,convert:function(e,t){return t.assign(e)},apply:function(e,t){return t.assign(e)},slerp:function(e,t,i){const n=e.magnitude(),o=t.magnitude();return e.normalize(),t.normalize(),y().simpleSlerp(e,t,i).multiply(y().lerp(n,o,i))}};const N=x;let M=0;const V=M++,T=M++,E=M++,D={GD:V,GDC:V,UTM:T,GC:E,GCC:E,GS:E},z=/^Z(\d+)$/,j={GD:V,UTM:T,GC:E,getReferenceFrame:function(e,t){switch(this.getCoordinateSystem(e)){case V:return new S(this.getEllipsoid(e),this.getLatitudeFirst(e),t);case T:return new C(this.getEllipsoid(e),this.getZone(e),this.getNorthernHemisphere(e),this.getNorthingFirst(e));case E:return new N}return new S(_.WE,!0,t)},getElevationFrame:function(e,t){return new S(this.getEllipsoid(e),!0,t)},getCoordinateSystem:function(e){for(const t of e){const e=D[t];if(void 0!==e)return e}return V},getEllipsoid:function(e){for(const t of e){const e=_[t];if(void 0!==e)return e}return _.WE},getEllipsoidString:function(e){for(const t of e){if(void 0!==_[t])return t}return"WE"},isStandardOrder:function(e){switch(this.getCoordinateSystem(e)){case V:return this.getLatitudeFirst(e);case T:return this.getNorthingFirst(e);case E:return!0}return this.getLatitudeFirst(e)},getLatitudeFirst:function(e){for(const t of e)if("longitude_first"===t)return!1;return!0},getNorthingFirst:function(e){for(const t of e)if("easting_first"===t)return!1;return!0},getZone:function(e){for(const t of e){const e=t.match(z);if(e)return parseInt(e[1])}return 1},getNorthernHemisphere:function(e){for(const t of e)if("S"===t)return!1;return!0}},G=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Base/X3DCast");var X=e.n(G);const P=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Numbers/Matrix4");var k=e.n(P),B=new(f())(0,0,0),L=new(f())(0,0,0),A=new(f())(0,0,0),R=new(f())(0,0,0),q=new(f())(0,0,0),U=new(f())(0,0,0);function W(e){this.addType(u().X3DGeospatialObject),this.radians=!1,this.origin=new(f())(0,0,0),this.originMatrix=new(k()),this.invOriginMatrix=new(k())}function H(e,t){return this.invOriginMatrix.multVecMatrix(this.referenceFrame.convert(e,t))}function Y(e,t){return this.referenceFrame.apply(this.originMatrix.multVecMatrix(B.assign(e)),t)}function Z(e,t){return this.invOriginMatrix.multDirMatrix(this.elevationFrame.normal(this.originMatrix.multVecMatrix(B.assign(e)),t))}function K(e,t){return J.call(this,e,t).multRight(this.invOriginMatrix)}function J(e,t){return this.referenceFrame.convert(e,A),this.elevationFrame.normal(A,q),R.set(0,0,1).cross(q),R.equals(f().Zero)&&R.set(1,0,0),U.assign(R).cross(q),R.normalize(),U.normalize(),t.set(R.x,R.y,R.z,0,q.x,q.y,q.z,0,U.x,U.y,U.z,0,A.x,A.y,A.z,1)}W.prototype={constructor:W,initialize:function(){this._geoSystem.addInterest("set_geoSystem__",this),this._geoOrigin.addInterest("set_geoOrigin__",this),this.set_geoSystem__(),this.set_geoOrigin__()},set_geoSystem__:function(){this.coordinateSystem=j.getCoordinateSystem(this._geoSystem),this.referenceFrame=j.getReferenceFrame(this._geoSystem,this.radians),this.elevationFrame=j.getElevationFrame(this._geoSystem,this.radians),this.standardOrder=j.isStandardOrder(this._geoSystem)},set_geoOrigin__:function(){this.geoOriginNode&&(this.geoOriginNode.removeInterest("set_origin__",this),this.geoOriginNode.removeInterest("set_rotateYUp__",this),this.geoOriginNode.removeInterest("addNodeEvent",this)),this.geoOriginNode=X()(u().GeoOrigin,this._geoOrigin),this.geoOriginNode&&(this.geoOriginNode.addInterest("set_origin__",this),this.geoOriginNode.addInterest("set_rotateYUp__",this),this.geoOriginNode.addInterest("addNodeEvent",this)),this.set_origin__(),this.set_rotateYUp__()},set_origin__:function(){this.geoOriginNode?this.geoOriginNode.getOrigin(this.origin):this.origin.set(0,0,0),this.set_originMatrix__()},set_originMatrix__:function(){if(this.geoOriginNode){var e=this.origin;this.elevationFrame.normal(e,q),R.set(0,0,1).cross(q),R.equals(f().Zero)&&R.set(1,0,0),U.assign(R).cross(q),R.normalize(),U.normalize(),this.originMatrix.set(R.x,R.y,R.z,0,q.x,q.y,q.z,0,U.x,U.y,U.z,0,e.x,e.y,e.z,1),this.invOriginMatrix.assign(this.originMatrix).inverse()}},set_rotateYUp__:function(){this.geoOriginNode&&this.geoOriginNode._rotateYUp.getValue()?(this.getCoord=H,this.getGeoCoord=Y,this.getGeoUpVector=Z,this.getLocationMatrix=K):(delete this.getCoord,delete this.getGeoCoord,delete this.getGeoUpVector,delete this.getLocationMatrix)},getReferenceFrame:function(){return this.referenceFrame},getStandardOrder:function(){return this.standardOrder},getCoord:function(e,t){return this.referenceFrame.convert(e,t).subtract(this.origin)},getGeoCoord:function(e,t){return this.referenceFrame.apply(B.assign(e).add(this.origin),t)},getGeoElevation:function(e){return this.getGeoCoord(e,L).z},getGeoUpVector:function(e,t){return this.elevationFrame.normal(B.assign(e).add(this.origin),t)},getLocationMatrix:function(e,t){var i=this.origin,n=J.call(this,e,t);return n[12]-=i.x,n[13]-=i.y,n[14]-=i.z,n},dispose:function(){}};const Q=W,$=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Geometry/Triangle3");var ee=e.n($);function te(e){c().call(this,e),Q.call(this,e),this.addType(u().GeoCoordinate)}te.prototype=Object.assign(Object.create(c().prototype),Q.prototype,{constructor:te,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"point",new(o().MFVec3d))]),getTypeName:function(){return"GeoCoordinate"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"coord"},initialize:function(){c().prototype.initialize.call(this),Q.prototype.initialize.call(this)},set1Point:function(){const e=new(f())(0,0,0);return function(t,i){this._point[t]=this.getGeoCoord(i,e)}}(),get1Point:function(){const e=new(f())(0,0,0);return function(t,i){if(t<this.length){const n=this.point;return t*=3,this.getCoord(e.set(n[t],n[t+1],n[t+2]),i)}return i.set(0,0,0)}}(),addPoint:function(){const e=new(f())(0,0,0),t=new(f())(0,0,0);return function(i,n){if(i<this.length){const o=this.point;i*=3,this.getCoord(e.set(o[i],o[i+1],o[i+2]),t),n.push(t[0],t[1],t[2],1)}else n.push(0,0,0,1)}}(),addPoints:function(){const e=new(f())(0,0,0),t=new(f())(0,0,0);return function(i,n){const o=this.point;for(let n=0,s=3*this.length;n<s;n+=3)this.getCoord(e.set(o[n],o[n+1],o[n+2]),t),i.push(t[0],t[1],t[2],1);for(let e=3*this.length,t=3*n;e<t;e+=3)i.push(0,0,0,1)}}(),getNormal:function(){const e=new(f())(0,0,0),t=new(f())(0,0,0),i=new(f())(0,0,0);return function(n,o,s){const r=this.length;return n<r&&o<r&&s<r?ee().normal(this.get1Point(n,e),this.get1Point(o,t),this.get1Point(s,i),new(f())(0,0,0)):new(f())(0,0,0)}}(),getQuadNormal:function(){const e=new(f())(0,0,0),t=new(f())(0,0,0),i=new(f())(0,0,0),n=new(f())(0,0,0);return function(o,s,r,a){const l=this.length;return o<l&&s<l&&r<l&&a<l?ee().quadNormal(this.get1Point(o,e),this.get1Point(s,t),this.get1Point(r,i),this.get1Point(a,n),new(f())(0,0,0)):new(f())(0,0,0)}}(),dispose:function(){Q.prototype.dispose.call(this),c().prototype.dispose.call(this)}});const ie=te,ne=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Rendering/X3DGeometryNode");var oe=e.n(ne);const se=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Numbers/Vector2");var re=e.n(se);function ae(e){oe().call(this,e),Q.call(this,e),this.addType(u().GeoElevationGrid),this._creaseAngle.setUnit("angle"),this._height.setUnit("length"),this.colorNode=null,this.texCoordNode=null,this.normalNode=null}ae.prototype=Object.assign(Object.create(oe().prototype),Q.prototype,{constructor:ae,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().initializeOnly,"geoGridOrigin",new(o().SFVec3d)),new(r())(u().initializeOnly,"xDimension",new(o().SFInt32)),new(r())(u().initializeOnly,"zDimension",new(o().SFInt32)),new(r())(u().initializeOnly,"xSpacing",new(o().SFDouble)(1)),new(r())(u().initializeOnly,"zSpacing",new(o().SFDouble)(1)),new(r())(u().inputOutput,"yScale",new(o().SFFloat)(1)),new(r())(u().initializeOnly,"solid",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"ccw",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"creaseAngle",new(o().SFDouble)),new(r())(u().initializeOnly,"colorPerVertex",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"normalPerVertex",new(o().SFBool)(!0)),new(r())(u().inputOutput,"color",new(o().SFNode)),new(r())(u().inputOutput,"texCoord",new(o().SFNode)),new(r())(u().inputOutput,"normal",new(o().SFNode)),new(r())(u().inputOutput,"height",new(o().MFDouble)(0,0))]),getTypeName:function(){return"GeoElevationGrid"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"geometry"},initialize:function(){oe().prototype.initialize.call(this),Q.prototype.initialize.call(this),this._color.addInterest("set_color__",this),this._texCoord.addInterest("set_texCoord__",this),this._normal.addInterest("set_normal__",this),this.set_color__(),this.set_texCoord__(),this.set_normal__()},set_color__:function(){this.colorNode&&(this.colorNode.removeInterest("requestRebuild",this),this.colorNode._transparent.removeInterest("set_transparent__",this)),this.colorNode=X()(u().X3DColorNode,this._color),this.colorNode?(this.colorNode.addInterest("requestRebuild",this),this.colorNode._transparent.addInterest("set_transparent__",this),this.set_transparent__()):this.setTransparent(!1)},set_transparent__:function(){this.setTransparent(this.colorNode.getTransparent())},set_texCoord__:function(){this.texCoordNode&&this.texCoordNode.removeInterest("requestRebuild",this),this.texCoordNode=X()(u().X3DTextureCoordinateNode,this._texCoord),this.texCoordNode&&this.texCoordNode.addInterest("requestRebuild",this),this.setTextureCoordinate(this.texCoordNode)},set_normal__:function(){this.normalNode&&this.normalNode.removeInterest("requestRebuild",this),this.normalNode=X()(u().X3DNormalNode,this._normal),this.normalNode&&this.normalNode.addInterest("requestRebuild",this)},getColor:function(){return this.colorNode},getTexCoord:function(){return this.texCoordNode},getNormal:function(){return this.normalNode},getHeight:function(e){return e<this._height.length?this._height[e]*this._yScale.getValue():0},createTexCoords:function(){for(var e=[],t=this._xDimension.getValue(),i=this._zDimension.getValue(),n=t-1,o=i-1,s=0;s<i;++s)for(var r=0;r<t;++r)e.push(new(re())(r/n,s/o));return e},createNormals:function(e,t,i){for(var n=!this._ccw.getValue(),o=[],s=[],r=0;r<e.length;++r)o[r]=[];for(var a=0;a<t.length;a+=3){var l=t[a],h=t[a+1],c=t[a+2];o[l].push(s.length),o[h].push(s.length+1),o[c].push(s.length+2);var d=ee().normal(e[l],e[h],e[c],new(f())(0,0,0));n&&d.negate(),s.push(d),s.push(d),s.push(d)}return this.refineNormals(o,s,this._creaseAngle.getValue())},createCoordIndex:function(){for(var e=[],t=this._xDimension.getValue(),i=t-1,n=this._zDimension.getValue()-1,o=0;o<n;++o)for(var s=0;s<i;++s){var r=o*t+s,a=(o+1)*t+s,l=(o+1)*t+(s+1),h=o*t+(s+1);e.push(r),e.push(l),e.push(a),e.push(r),e.push(h),e.push(l)}return e},createPoints:function(){var e=[],t=this._xDimension.getValue(),i=this._zDimension.getValue(),n=this._xSpacing.getValue(),o=this._zSpacing.getValue();if(this.getStandardOrder())for(var s=0;s<i;++s)for(var r=0;r<t;++r){(a=new(f())(o*s,n*r,this.getHeight(r+s*t))).add(this._geoGridOrigin.getValue()),e.push(this.getCoord(a,a))}else for(s=0;s<i;++s)for(r=0;r<t;++r){var a;(a=new(f())(n*r,o*s,this.getHeight(r+s*t))).add(this._geoGridOrigin.getValue()),e.push(this.getCoord(a,a))}return e},build:function(){if(!(this._xDimension.getValue()<2||this._zDimension.getValue()<2)){var e=this._colorPerVertex.getValue(),t=this._normalPerVertex.getValue(),i=this.createCoordIndex(),n=this.getColor(),o=this.getTexCoord(),s=this.getNormal(),r=this.createPoints(),a=this.getColors(),l=this.getMultiTexCoords(),h=this.getNormals(),c=this.getVertices(),d=0;if(o)o.init(l);else{var u=this.createTexCoords(),p=this.getTexCoords();l.push(p)}for(var g=0;g<i.length;++d)for(var _=0;_<6;++_,++g){var w=i[g],f=r[w];if(n&&(e?n.addColor(w,a):n.addColor(d,a)),o)o.addTexCoord(w,l);else{var m=u[w];p.push(m.x,m.y,0,1)}s&&(t?s.addVector(w,h):s.addVector(d,h)),c.push(f.x,f.y,f.z,1)}if(!s)for(var y=this.createNormals(r,i),O=0;O<y.length;++O){var S=y[O];h.push(S.x,S.y,S.z)}this.setSolid(this._solid.getValue()),this.setCCW(this._ccw.getValue())}},dispose:function(){Q.prototype.dispose.call(this),oe().prototype.dispose.call(this)}});const le=ae,he=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Core/X3DChildNode");var ce=e.n(he);const de=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Grouping/X3DBoundedObject");var ue=e.n(de);const pe=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Rendering/TraverseType");var ge=e.n(pe);const _e=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Grouping/Group");var we=e.n(_e);const fe=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Networking/Inline");var me=e.n(fe);const ye=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Geometry/Box3");var Oe=e.n(ye),Se=new(f())(0,0,0);function Ie(e){ce().call(this,e),ue().call(this,e),Q.call(this,e),this.addType(u().GeoLOD),this._range.setUnit("length"),this.unload=!1,this.rootGroup=new(we())(this.getBrowser().getPrivateScene()),this.rootInline=new(me())(e),this.child1Inline=new(me())(e),this.child2Inline=new(me())(e),this.child3Inline=new(me())(e),this.child4Inline=new(me())(e),this.childrenLoaded=!1,this.childBBox=new(Oe()),this.keepCurrentLevel=!1,this.modelViewMatrix=new(k())}Ie.prototype=Object.assign(Object.create(ce().prototype),ue().prototype,Q.prototype,{constructor:Ie,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().initializeOnly,"rootUrl",new(o().MFString)),new(r())(u().initializeOnly,"child1Url",new(o().MFString)),new(r())(u().initializeOnly,"child2Url",new(o().MFString)),new(r())(u().initializeOnly,"child3Url",new(o().MFString)),new(r())(u().initializeOnly,"child4Url",new(o().MFString)),new(r())(u().initializeOnly,"center",new(o().SFVec3d)),new(r())(u().initializeOnly,"range",new(o().SFFloat)(10)),new(r())(u().outputOnly,"level_changed",new(o().SFInt32)(-1)),new(r())(u().inputOutput,"visible",new(o().SFBool)(!0)),new(r())(u().inputOutput,"bboxDisplay",new(o().SFBool)),new(r())(u().initializeOnly,"bboxSize",new(o().SFVec3f)(-1,-1,-1)),new(r())(u().initializeOnly,"bboxCenter",new(o().SFVec3f)),new(r())(u().initializeOnly,"rootNode",new(o().MFNode)),new(r())(u().outputOnly,"children",new(o().MFNode))]),getTypeName:function(){return"GeoLOD"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){ce().prototype.initialize.call(this),ue().prototype.initialize.call(this),Q.prototype.initialize.call(this),this._rootNode.addFieldInterest(this.rootGroup._children),this.rootGroup._children=this._rootNode,this.rootGroup.setPrivate(!0),this.rootGroup.setup(),this.rootInline._loadState.addInterest("set_rootLoadState__",this),this.child1Inline._loadState.addInterest("set_childLoadState__",this),this.child2Inline._loadState.addInterest("set_childLoadState__",this),this.child3Inline._loadState.addInterest("set_childLoadState__",this),this.child4Inline._loadState.addInterest("set_childLoadState__",this),this._rootUrl.addFieldInterest(this.rootInline._url),this._child1Url.addFieldInterest(this.child1Inline._url),this._child2Url.addFieldInterest(this.child2Inline._url),this._child3Url.addFieldInterest(this.child3Inline._url),this._child4Url.addFieldInterest(this.child4Inline._url),this.rootInline._load=!0,this.child1Inline._load=!1,this.child2Inline._load=!1,this.child3Inline._load=!1,this.child4Inline._load=!1,this.rootInline._url=this._rootUrl,this.child1Inline._url=this._child1Url,this.child2Inline._url=this._child2Url,this.child3Inline._url=this._child3Url,this.child4Inline._url=this._child4Url,this.rootInline.setup(),this.child1Inline.setup(),this.child2Inline.setup(),this.child3Inline.setup(),this.child4Inline.setup()},getBBox:function(e,t){if(this._bboxSize.getValue().equals(this.getDefaultBBoxSize())){switch(this.childrenLoaded?this._level_changed.getValue():0){case 0:return this._rootNode.length?this.rootGroup.getBBox(e,t):this.rootInline.getBBox(e,t);case 1:{const i=this.childBBox;return e.set(),e.add(this.child1Inline.getBBox(i,t)),e.add(this.child2Inline.getBBox(i,t)),e.add(this.child3Inline.getBBox(i,t)),e.add(this.child4Inline.getBBox(i,t)),e}}return e.set()}return e.set(this._bboxSize.getValue(),this._bboxCenter.getValue())},set_rootLoadState__:function(){0===this._level_changed.getValue()&&(this._rootNode.length||this.rootInline.checkLoadState()===u().COMPLETE_STATE&&(this._children=this.rootInline.getInternalScene().getRootNodes(),this.childrenLoaded=!1))},set_childLoadState__:function(){if(1===this._level_changed.getValue()){var e=0;if(this.child1Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child1Inline.checkLoadState()!==u().FAILED_STATE||++e,this.child2Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child2Inline.checkLoadState()!==u().FAILED_STATE||++e,this.child3Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child3Inline.checkLoadState()!==u().FAILED_STATE||++e,this.child4Inline.checkLoadState()!==u().COMPLETE_STATE&&this.child4Inline.checkLoadState()!==u().FAILED_STATE||++e,4===e){this.childrenLoaded=!0;var t=this._children;t.length=0;for(var i=0,n=(o=this.child1Inline.getInternalScene().getRootNodes()).length;i<n;++i)t.push(o[i]);for(i=0,n=(o=this.child2Inline.getInternalScene().getRootNodes()).length;i<n;++i)t.push(o[i]);for(i=0,n=(o=this.child3Inline.getInternalScene().getRootNodes()).length;i<n;++i)t.push(o[i]);var o;for(i=0,n=(o=this.child4Inline.getInternalScene().getRootNodes()).length;i<n;++i)t.push(o[i])}}},set_childCameraObject__:function(){this.setCameraObject(this.child1Inline.getCameraObject()||this.child2Inline.getCameraObject()||this.child3Inline.getCameraObject()||this.child4Inline.getCameraObject())},set_childPickableObject__:function(){this.setPickableObject(this.child1Inline.getPickableObject()||this.child2Inline.getPickableObject()||this.child3Inline.getPickableObject()||this.child4Inline.getPickableObject())},getLevel:function(e){return this.getDistance(e)<this._range.getValue()?1:0},getDistance:function(e){return e.translate(this.getCoord(this._center.getValue(),Se)),e.origin.magnitude()},traverse:function(e,t){switch(e){case ge().PICKING:var i=this.getBrowser().getPickingHierarchy();return i.push(this),this.traverseChildren(e,t),void i.pop();case ge().DISPLAY:var n=this.getLevel(this.modelViewMatrix.assign(t.getModelViewMatrix().get()));if(n!==this._level_changed.getValue())switch(this._level_changed=n,n){case 0:this.child1Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child2Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child3Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child4Inline._isCameraObject.removeInterest("set_childCameraObject__",this),this.child1Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this.child2Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this.child3Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this.child4Inline._isPickableObject.removeInterest("set_childPickableObject__",this),this._rootNode.length?(this.rootGroup._isCameraObject.addFieldInterest(this._isCameraObject),this.rootGroup._isPickableObject.addFieldInterest(this._isPickableObject),this.setCameraObject(this.rootGroup.getCameraObject()),this.setPickableObject(this.rootGroup.getPickableObject()),this._children=this._rootNode,this.childrenLoaded=!1):this.rootInline.checkLoadState()==u().COMPLETE_STATE&&(this.rootInline._isCameraObject.addFieldInterest(this._isCameraObject),this.rootInline._isPickableObject.addFieldInterest(this._isPickableObject),this.setCameraObject(this.rootInline.getCameraObject()),this.setPickableObject(this.rootInline.getPickableObject()),this._children=this.rootInline.getInternalScene().getRootNodes(),this.childrenLoaded=!1),this.unload&&(this.child1Inline._load=!1,this.child2Inline._load=!1,this.child3Inline._load=!1,this.child4Inline._load=!1);break;case 1:this._rootNode.length?(this.rootGroup._isCameraObject.removeFieldInterest(this._isCameraObject),this.rootGroup._isPickableObject.removeFieldInterest(this._isPickableObject)):(this.rootInline._isCameraObject.removeFieldInterest(this._isCameraObject),this.rootInline._isPickableObject.removeFieldInterest(this._isPickableObject)),this.child1Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child2Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child3Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child4Inline._isCameraObject.addInterest("set_childCameraObject__",this),this.child1Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.child2Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.child3Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.child4Inline._isPickableObject.addInterest("set_childPickableObject__",this),this.set_childCameraObject__(),this.set_childPickableObject__(),this.child1Inline._load.getValue()?this.set_childLoadState__():(this.child1Inline._load=!0,this.child2Inline._load=!0,this.child3Inline._load=!0,this.child4Inline._load=!0)}return void this.traverseChildren(e,t);default:return void this.traverseChildren(e,t)}},traverseChildren:function(e,t){switch(this.childrenLoaded?this._level_changed.getValue():0){case 0:this._rootNode.length?this.rootGroup.traverse(e,t):this.rootInline.traverse(e,t);break;case 1:this.child1Inline.traverse(e,t),this.child2Inline.traverse(e,t),this.child3Inline.traverse(e,t),this.child4Inline.traverse(e,t)}},dispose:function(){Q.prototype.dispose.call(this),ue().prototype.dispose.call(this),ce().prototype.dispose.call(this)}});const be=Ie,Fe=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Grouping/X3DTransformMatrix3DNode");var ve=e.n(Fe),Ce=new(k());function xe(e){ve().call(this,e),Q.call(this,e),this.addType(u().GeoLocation)}xe.prototype=Object.assign(Object.create(ve().prototype),Q.prototype,{constructor:xe,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"geoCoords",new(o().SFVec3d)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().inputOutput,"visible",new(o().SFBool)(!0)),new(r())(u().inputOutput,"bboxDisplay",new(o().SFBool)),new(r())(u().initializeOnly,"bboxSize",new(o().SFVec3f)(-1,-1,-1)),new(r())(u().initializeOnly,"bboxCenter",new(o().SFVec3f)),new(r())(u().inputOnly,"addChildren",new(o().MFNode)),new(r())(u().inputOnly,"removeChildren",new(o().MFNode)),new(r())(u().inputOutput,"children",new(o().MFNode))]),getTypeName:function(){return"GeoLocation"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){ve().prototype.initialize.call(this),Q.prototype.initialize.call(this),this.addInterest("eventsProcessed",this),this.eventsProcessed()},eventsProcessed:function(){this.setMatrix(this.getLocationMatrix(this._geoCoords.getValue(),Ce))},dispose:function(){Q.prototype.dispose.call(this),ve().prototype.dispose.call(this)}});const Ne=xe,Me=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Core/X3DInfoNode");var Ve=e.n(Me);const Te=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Networking/X3DUrlObject");var Ee=e.n(Te);function De(e){Ve().call(this,e),Ee().call(this,e),this.addType(u().GeoMetadata)}De.prototype=Object.assign(Object.create(Ve().prototype),Ee().prototype,{constructor:De,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().inputOutput,"url",new(o().MFString)),new(r())(u().inputOutput,"load",new(o().SFBool)(!0)),new(r())(u().inputOutput,"autoRefresh",new(o().SFTime)),new(r())(u().inputOutput,"autoRefreshTimeLimit",new(o().SFTime)(3600)),new(r())(u().inputOutput,"summary",new(o().MFString)),new(r())(u().inputOutput,"data",new(o().MFNode))]),getTypeName:function(){return"GeoMetadata"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){Ve().prototype.initialize.call(this),Ee().prototype.initialize.call(this)},requestImmediateLoad:function(e=!0){},requestUnload:function(){},set_load__:function(){},set_url__:function(){},dispose:function(){Ee().prototype.dispose.call(this),Ve().prototype.dispose.call(this)}});const ze=De,je=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Core/X3DNode");var Ge=e.n(je);function Xe(e){Ge().call(this,e),this.addType(u().GeoOrigin),this.radians=!1}Xe.prototype=Object.assign(Object.create(Ge().prototype),{constructor:Xe,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"geoCoords",new(o().SFVec3d)),new(r())(u().initializeOnly,"rotateYUp",new(o().SFBool))]),getTypeName:function(){return"GeoOrigin"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"geoOrigin"},initialize:function(){Ge().prototype.initialize.call(this),this._geoSystem.addInterest("set_geoSystem__",this),this.set_geoSystem__()},set_geoSystem__:function(){this.referenceFrame=j.getReferenceFrame(this._geoSystem,this.radians)},getOrigin:function(e){return this.referenceFrame.convert(this._geoCoords.getValue(),e)}});const Pe=Xe,ke=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Interpolation/X3DInterpolatorNode");var Be=e.n(ke);function Le(e){Be().call(this,e),Q.call(this,e),this.addType(u().GeoPositionInterpolator),this._value_changed.setUnit("length"),this.geocentric=new N}Le.prototype=Object.assign(Object.create(Be().prototype),Q.prototype,{constructor:Le,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOnly,"set_fraction",new(o().SFFloat)),new(r())(u().inputOutput,"key",new(o().MFFloat)),new(r())(u().inputOutput,"keyValue",new(o().MFVec3d)),new(r())(u().outputOnly,"value_changed",new(o().SFVec3d)),new(r())(u().outputOnly,"geovalue_changed",new(o().SFVec3d))]),keyValue0:new(f())(0,0,0),keyValue1:new(f())(0,0,0),geovalue:new(f())(0,0,0),value:new(f())(0,0,0),getTypeName:function(){return"GeoPositionInterpolator"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},setup:function(){Q.prototype.initialize.call(this),Be().prototype.setup.call(this)},initialize:function(){Be().prototype.initialize.call(this),this._keyValue.addInterest("set_keyValue__",this)},set_keyValue__:function(){var e=this._key,t=this._keyValue;t.length<e.length&&t.resize(e.length,t.length?t[t.length-1]:new(o().SFVec3f))},interpolate:function(e,t,i){this.getCoord(this._keyValue[e].getValue(),this.keyValue0),this.getCoord(this._keyValue[t].getValue(),this.keyValue1);var n=this.geocentric.slerp(this.keyValue0,this.keyValue1,i);this._geovalue_changed=this.getGeoCoord(n,this.geovalue),this._value_changed=n},dispose:function(){Q.prototype.dispose.call(this),Be().prototype.dispose.call(this)}});const Ae=Le,Re=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/EnvironmentalSensor/X3DEnvironmentalSensorNode");var qe=e.n(Re);const Ue=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/EnvironmentalSensor/ProximitySensor");var We=e.n(Ue),He=new(f())(0,0,0);function Ye(e){qe().call(this,e),Q.call(this,e),this.addType(u().GeoProximitySensor),this._position_changed.setUnit("length"),this._centerOfRotation_changed.setUnit("length"),this.proximitySensor=new(We())(e),this.setCameraObject(this.proximitySensor.getCameraObject()),this.setPickableObject(this.proximitySensor.getPickableObject())}Ye.prototype=Object.assign(Object.create(qe().prototype),Q.prototype,{constructor:Ye,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"enabled",new(o().SFBool)(!0)),new(r())(u().inputOutput,"size",new(o().SFVec3f)),new(r())(u().inputOutput,"center",new(o().SFVec3f)),new(r())(u().outputOnly,"isActive",new(o().SFBool)),new(r())(u().outputOnly,"enterTime",new(o().SFTime)),new(r())(u().outputOnly,"exitTime",new(o().SFTime)),new(r())(u().outputOnly,"geoCoord_changed",new(o().SFVec3d)),new(r())(u().outputOnly,"position_changed",new(o().SFVec3f)),new(r())(u().outputOnly,"orientation_changed",new(o().SFRotation)),new(r())(u().outputOnly,"centerOfRotation_changed",new(o().SFVec3f))]),getTypeName:function(){return"GeoProximitySensor"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){qe().prototype.initialize.call(this),Q.prototype.initialize.call(this),this._enabled.addFieldInterest(this.proximitySensor._enabled),this._size.addFieldInterest(this.proximitySensor._size),this._center.addFieldInterest(this.proximitySensor._center),this.proximitySensor._isCameraObject.addFieldInterest(this._isCameraObject),this.proximitySensor._isPickableObject.addFieldInterest(this._isPickableObject),this.proximitySensor._isActive.addFieldInterest(this._isActive),this.proximitySensor._enterTime.addFieldInterest(this._enterTime),this.proximitySensor._exitTime.addFieldInterest(this._exitTime),this.proximitySensor._position_changed.addFieldInterest(this._position_changed),this.proximitySensor._orientation_changed.addFieldInterest(this._orientation_changed),this.proximitySensor._centerOfRotation_changed.addFieldInterest(this._centerOfRotation_changed),this.proximitySensor._position_changed.addInterest("set_position__",this),this.proximitySensor._enabled=this._enabled,this.proximitySensor._size=this._size,this.proximitySensor._center=this._center,this.proximitySensor.setup()},set_position__:function(e){this._geoCoord_changed=this.getGeoCoord(this.proximitySensor._position_changed.getValue(),He)},traverse:function(e,t){this.proximitySensor.traverse(e,t)},dispose:function(){Q.prototype.dispose.call(this),qe().prototype.dispose.call(this)}});const Ze=Ye,Ke=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/PointingDeviceSensor/X3DTouchSensorNode");var Je=e.n(Ke),Qe=new(k()),$e=new(f())(0,0,0);function et(e){Je().call(this,e),Q.call(this,e),this.addType(u().GeoTouchSensor),this._hitPoint_changed.setUnit("length")}et.prototype=Object.assign(Object.create(Je().prototype),Q.prototype,{constructor:et,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().inputOutput,"description",new(o().SFString)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"enabled",new(o().SFBool)(!0)),new(r())(u().outputOnly,"hitTexCoord_changed",new(o().SFVec2f)),new(r())(u().outputOnly,"hitNormal_changed",new(o().SFVec3f)),new(r())(u().outputOnly,"hitPoint_changed",new(o().SFVec3f)),new(r())(u().outputOnly,"hitGeoCoord_changed",new(o().SFVec3d)),new(r())(u().outputOnly,"isOver",new(o().SFBool)),new(r())(u().outputOnly,"isActive",new(o().SFBool)),new(r())(u().outputOnly,"touchTime",new(o().SFTime))]),getTypeName:function(){return"GeoTouchSensor"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){Je().prototype.initialize.call(this),Q.prototype.initialize.call(this)},set_over__:function(e,t,i,n,o){if(Je().prototype.set_over__.call(this,e,t,i,n,o),this._isOver.getValue()){var s=t.intersection;Qe.assign(i).inverse(),this._hitTexCoord_changed=s.texCoord,this._hitNormal_changed=i.multMatrixDir(s.normal.copy()).normalize(),this._hitPoint_changed=Qe.multVecMatrix(s.point.copy()),this._hitGeoCoord_changed=this.getGeoCoord(this._hitPoint_changed.getValue(),$e)}},dispose:function(){Q.prototype.dispose.call(this),Je().prototype.dispose.call(this)}});const tt=et;var it=new(k()),nt=new(k());function ot(e){ve().call(this,e),Q.call(this,e),this.addType(u().GeoTransform),this._translation.setUnit("length")}ot.prototype=Object.assign(Object.create(ve().prototype),Q.prototype,{constructor:ot,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().inputOutput,"translation",new(o().SFVec3f)),new(r())(u().inputOutput,"rotation",new(o().SFRotation)),new(r())(u().inputOutput,"scale",new(o().SFVec3f)(1,1,1)),new(r())(u().inputOutput,"scaleOrientation",new(o().SFRotation)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOutput,"geoCenter",new(o().SFVec3d)),new(r())(u().inputOutput,"visible",new(o().SFBool)(!0)),new(r())(u().inputOutput,"bboxDisplay",new(o().SFBool)),new(r())(u().initializeOnly,"bboxSize",new(o().SFVec3f)(-1,-1,-1)),new(r())(u().initializeOnly,"bboxCenter",new(o().SFVec3f)),new(r())(u().inputOnly,"addChildren",new(o().MFNode)),new(r())(u().inputOnly,"removeChildren",new(o().MFNode)),new(r())(u().inputOutput,"children",new(o().MFNode))]),getTypeName:function(){return"GeoTransform"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){ve().prototype.initialize.call(this),Q.prototype.initialize.call(this),this.addInterest("eventsProcessed",this),this.eventsProcessed()},eventsProcessed:function(){this.getLocationMatrix(this._geoCenter.getValue(),nt),it.set(this._translation.getValue(),this._rotation.getValue(),this._scale.getValue(),this._scaleOrientation.getValue()),this.setMatrix(it.multRight(nt).multLeft(nt.inverse()))},dispose:function(){Q.prototype.dispose.call(this),ve().prototype.dispose.call(this)}});const st=ot,rt=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Navigation/X3DViewpointNode");var at=e.n(rt);const lt=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Interpolation/ScalarInterpolator");var ht=e.n(lt);const ct=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("x_ite/Components/Navigation/NavigationInfo");var dt=e.n(ct);const ut=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Geometry/Camera");var pt=e.n(ut);const gt=window[Symbol.for("X_ITE.X3D-8.0.0a")].require("standard/Math/Numbers/Rotation4");var _t=e.n(gt);function wt(e,t){at().prototype.traverse.call(this,e,t),this.navigationInfoNode.traverse(e,t)}function ft(e){switch(at().call(this,e),Q.call(this,e),this.addType(u().GeoViewpoint),this._centerOfRotation.setUnit("length"),this._fieldOfView.setUnit("angle"),this.navigationInfoNode=new(dt())(e),this.fieldOfViewInterpolator=new(ht())(this.getBrowser().getPrivateScene()),this.projectionMatrix=new(k()),this.elevation=0,e.specificationVersion){case"2.0":case"3.0":case"3.1":case"3.2":this.traverse=wt}}ft.prototype=Object.assign(Object.create(at().prototype),Q.prototype,{constructor:ft,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(l())([new(r())(u().inputOutput,"metadata",new(o().SFNode)),new(r())(u().initializeOnly,"geoOrigin",new(o().SFNode)),new(r())(u().initializeOnly,"geoSystem",new(o().MFString)("GD","WE")),new(r())(u().inputOnly,"set_bind",new(o().SFBool)),new(r())(u().inputOutput,"description",new(o().SFString)),new(r())(u().inputOutput,"position",new(o().SFVec3d)(0,0,1e5)),new(r())(u().inputOutput,"orientation",new(o().SFRotation)),new(r())(u().inputOutput,"centerOfRotation",new(o().SFVec3d)),new(r())(u().inputOutput,"fieldOfView",new(o().SFFloat)(.7854)),new(r())(u().inputOutput,"jump",new(o().SFBool)(!0)),new(r())(u().inputOutput,"retainUserOffsets",new(o().SFBool)),new(r())(u().inputOutput,"navType",new(o().MFString)("EXAMINE","ANY")),new(r())(u().inputOutput,"headlight",new(o().SFBool)(!0)),new(r())(u().initializeOnly,"speedFactor",new(o().SFFloat)(1)),new(r())(u().outputOnly,"isBound",new(o().SFBool)),new(r())(u().outputOnly,"bindTime",new(o().SFTime))]),getTypeName:function(){return"GeoViewpoint"},getComponentName:function(){return"Geospatial"},getContainerField:function(){return"children"},initialize:function(){at().prototype.initialize.call(this),Q.prototype.initialize.call(this);const e=this.getBrowser().getContext();this.logarithmicDepthBuffer=e.HAS_FEATURE_FRAG_DEPTH,this._position.addInterest("set_position__",this),this._positionOffset.addInterest("set_position__",this),this._navType.addFieldInterest(this.navigationInfoNode._type),this._headlight.addFieldInterest(this.navigationInfoNode._headlight),this.navigationInfoNode.setup(),this.set_position__(),this.fieldOfViewInterpolator._key=[0,1],this.fieldOfViewInterpolator.setup(),this.getEaseInEaseOut()._modifiedFraction_changed.addFieldInterest(this.fieldOfViewInterpolator._set_fraction),this.fieldOfViewInterpolator._value_changed.addFieldInterest(this._fieldOfViewScale)},setInterpolators:function(e,t){if(e.getType().includes(u().Viewpoint)||e.getType().includes(u().GeoViewpoint)){const i=e.getFieldOfView()/t.getFieldOfView();this.fieldOfViewInterpolator._keyValue=new(o().MFFloat)(i,t._fieldOfViewScale.getValue()),this._fieldOfViewScale=i}else this.fieldOfViewInterpolator._keyValue=new(o().MFFloat)(t._fieldOfViewScale.getValue(),t._fieldOfViewScale.getValue()),this._fieldOfViewScale=t._fieldOfViewScale.getValue()},getLogarithmicDepthBuffer:function(){return this.logarithmicDepthBuffer},setPosition:function(){const e=new(f())(0,0,0);return function(t){this._position.setValue(this.getGeoCoord(t,e))}}(),getPosition:function(){const e=new(f())(0,0,0);return function(){return this.getCoord(this._position.getValue(),e)}}(),set_position__:function(){const e=new(f())(0,0,0);return function(){this.getCoord(this._position.getValue(),e),this.elevation=this.getGeoElevation(e.add(this._positionOffset.getValue()))}}(),setOrientation:function(){const e=new(k()),t=new(_t())(0,0,1,0);return function(i){const n=this.getLocationMatrix(this._position.getValue(),e).submatrix;t.setMatrix(n),this._orientation.setValue(t.inverse().multLeft(i))}}(),getOrientation:function(){const e=new(k()),t=new(_t())(0,0,1,0);return function(){const i=this.getLocationMatrix(this._position.getValue(),e).submatrix;return t.setMatrix(i),t.multLeft(this._orientation.getValue())}}(),getCenterOfRotation:function(){const e=new(f())(0,0,0);return function(){return this.getCoord(this._centerOfRotation.getValue(),e)}}(),getFieldOfView:function(){const e=this._fieldOfView*this._fieldOfViewScale;return e>0&&e<Math.PI?e:Math.PI/4},getMaxFarValue:function(){return 1e10},getUpVector:function(){const e=new(f())(0,0,0),t=new(f())(0,0,0);return function(){return this.getCoord(this._position.getValue(),e),this.getGeoUpVector(e.add(this._positionOffset.getValue()),t)}}(),getSpeedFactor:function(){return(Math.max(this.elevation,0)+10)/10*this._speedFactor.getValue()},getScreenScale:function(e,t,i){const n=t[2],o=t[3];let s=Math.abs(e.z)*Math.tan(this.getFieldOfView()/2)*2;return s/=n>o?o:n,i.set(s,s,s)},getViewportSize:function(){const e=new(re())(0,0);return function(t,i){const n=t[2],o=t[3],s=i*Math.tan(this.getFieldOfView()/2)*2,r=n/o;return r>1?e.set(s*r,s):e.set(s,s/r)}}(),getLookAtDistance:function(e){return e.size.magnitude()/2/Math.tan(this.getFieldOfView()/2)},getProjectionMatrixWithLimits:function(e,t,i){return pt().perspective(this.getFieldOfView(),e,t,i[2],i[3],this.projectionMatrix)},dispose:function(){Q.prototype.dispose.call(this),at().prototype.dispose.call(this)}});const mt=ft;i().addComponent({name:"Geospatial",types:{GeoCoordinate:ie,GeoElevationGrid:le,GeoLOD:be,GeoLocation:Ne,GeoMetadata:ze,GeoOrigin:Pe,GeoPositionInterpolator:Ae,GeoProximitySensor:Ze,GeoTouchSensor:tt,GeoTransform:st,GeoViewpoint:mt},abstractTypes:{X3DGeospatialObject:Q}})})();