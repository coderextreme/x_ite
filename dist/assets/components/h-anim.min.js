!function(){const t=window[Symbol.for("X_ITE.X3D-6.1.0")],e=t.define,n=t.require;e("x_ite/Components/HAnim/HAnimDisplacer",["x_ite/Fields","x_ite/Base/X3DFieldDefinition","x_ite/Base/FieldDefinitionArray","x_ite/Components/Rendering/X3DGeometricPropertyNode","x_ite/Base/X3DConstants"],(function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimDisplacer),this._displacements.setUnit("length")}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"coordIndex",new t.MFInt32),new e(o.inputOutput,"weight",new t.SFFloat),new e(o.inputOutput,"displacements",new t.MFVec3f)]),getTypeName:function(){return"HAnimDisplacer"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"displacers"}}),s})),e("x_ite/Components/HAnim/HAnimHumanoid",["x_ite/Fields","x_ite/Base/X3DFieldDefinition","x_ite/Base/FieldDefinitionArray","x_ite/Components/Core/X3DChildNode","x_ite/Components/Grouping/Group","x_ite/Components/Grouping/Transform","x_ite/Components/Grouping/X3DBoundedObject","x_ite/Rendering/TraverseType","x_ite/Base/X3DConstants","x_ite/Base/X3DCast","standard/Math/Numbers/Matrix4","standard/Math/Numbers/Vector3"],(function(t,e,n,i,o,s,r,a,u,d,l,p){"use strict";function c(t){i.call(this,t),r.call(this,t),this.addType(u.HAnimHumanoid),this._translation.setUnit("length"),this._center.setUnit("length"),this._bboxSize.setUnit("length"),this._bboxCenter.setUnit("length"),this.viewpointsNode=new o(t),this.skeletonNode=new o(t),this.skinNode=new o(t),this.transformNode=new s(t),this.jointNodes=[],this.skinNormalNode=null,this.skinCoordNode=null,this.restNormalNode=null,this.restCoordNode=null}var m,w,h,_,f;return c.prototype=Object.assign(Object.create(i.prototype),r.prototype,{constructor:c,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new n([new e(u.inputOutput,"metadata",new t.SFNode),new e(u.inputOutput,"name",new t.SFString),new e(u.inputOutput,"version",new t.SFString),new e(u.inputOutput,"info",new t.MFString),new e(u.inputOutput,"translation",new t.SFVec3f),new e(u.inputOutput,"rotation",new t.SFRotation),new e(u.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(u.inputOutput,"scaleOrientation",new t.SFRotation),new e(u.inputOutput,"center",new t.SFVec3f),new e(u.inputOutput,"visible",new t.SFBool(!0)),new e(u.inputOutput,"bboxDisplay",new t.SFBool),new e(u.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(u.initializeOnly,"bboxCenter",new t.SFVec3f),new e(u.inputOutput,"viewpoints",new t.MFNode),new e(u.inputOutput,"sites",new t.MFNode),new e(u.inputOutput,"joints",new t.MFNode),new e(u.inputOutput,"segments",new t.MFNode),new e(u.inputOutput,"motions",new t.MFNode),new e(u.inputOutput,"skeleton",new t.MFNode),new e(u.inputOutput,"skinNormal",new t.SFNode),new e(u.inputOutput,"skinCoord",new t.SFNode),new e(u.inputOutput,"skin",new t.MFNode)]),getTypeName:function(){return"HAnimHumanoid"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"},initialize:function(){i.prototype.initialize.call(this),r.prototype.initialize.call(this),this.viewpointsNode.setAllowedTypes(u.HAnimSite),this.skeletonNode.setAllowedTypes(u.HAnimJoint,u.HAnimSite),this._viewpoints.addFieldInterest(this.viewpointsNode._children),this._skeleton.addFieldInterest(this.skeletonNode._children),this._skin.addFieldInterest(this.skinNode._children),this.viewpointsNode._children=this._viewpoints,this.skeletonNode._children=this._skeleton,this.skinNode._children=this._skin,this.viewpointsNode.setPrivate(!0),this.skeletonNode.setPrivate(!0),this.skinNode.setPrivate(!0),this._translation.addFieldInterest(this.transformNode._translation),this._rotation.addFieldInterest(this.transformNode._rotation),this._scale.addFieldInterest(this.transformNode._scale),this._scaleOrientation.addFieldInterest(this.transformNode._scaleOrientation),this._center.addFieldInterest(this.transformNode._center),this._bboxSize.addFieldInterest(this.transformNode._bboxSize),this._bboxCenter.addFieldInterest(this.transformNode._bboxCenter),this.transformNode._translation=this._translation,this.transformNode._rotation=this._rotation,this.transformNode._scale=this._scale,this.transformNode._scaleOrientation=this._scaleOrientation,this.transformNode._center=this._center,this.transformNode._bboxSize=this._bboxSize,this.transformNode._bboxCenter=this._bboxCenter,this.transformNode._children=[this.viewpointsNode,this.skeletonNode,this.skinNode],this.transformNode._isCameraObject.addFieldInterest(this._isCameraObject),this.transformNode._isPickableObject.addFieldInterest(this._isPickableObject),this.viewpointsNode.setup(),this.skeletonNode.setup(),this.skinNode.setup(),this.transformNode.setup(),this.setCameraObject(this.transformNode.getCameraObject()),this.setPickableObject(this.transformNode.getPickableObject()),this._joints.addInterest("set_joints__",this),this._skinNormal.addInterest("set_skinNormal__",this),this._skinCoord.addInterest("set_skinCoord__",this),this.set_joints__(),this.set_skinNormal__(),this.set_skinCoord__()},getBBox:function(t,e){return this.transformNode.getBBox(t,e)},set_joints__:function(){var t=this.jointNodes;t.length=0;for(var e=0,n=this._joints.length;e<n;++e){var i=d(u.HAnimJoint,this._joints[e]);i&&t.push(i)}},set_skinNormal__:function(){this.restNormalNode=null,this.skinNormalNode=d(u.X3DNormalNode,this._skinNormal),this.skinNormalNode&&(this.restNormalNode=this.skinNormalNode.copy())},set_skinCoord__:function(){this.restCoordNode=null,this.skinCoordNode=d(u.X3DCoordinateNode,this._skinCoord),this.skinCoordNode&&(this.restCoordNode=this.skinCoordNode.copy())},traverse:function(t,e){this.transformNode.traverse(t,e),this.skinning(t,e)},skinning:(m=new l,w=new p(0,0,0),h=new p(0,0,0),_=new p(0,0,0),f=new p(0,0,0),function(t,e){if(t===a.CAMERA&&this.skinCoordNode){var n=this.jointNodes,i=this.skinNormalNode,o=this.skinCoordNode,s=this.restNormalNode,r=this.restCoordNode;i&&i._vector.assign(s._vector),o._point.assign(r._point),m.assign(this.transformNode.getMatrix()).multRight(e.getModelViewMatrix().get()).inverse();for(var u=0,d=n.length;u<d;++u){var l=n[u],c=l._skinCoordIndex.length;if(0!==c){for(var N=l.getModelMatrix().multRight(m),F=l.getDisplacers(),O=0,g=F.length;O<g;++O)for(var S=F[O],x=S._coordIndex.getValue(),C=S._coordIndex.length,b=S._weight.getValue(),y=S._displacements.getValue(),A=S._displacements.length,M=0;M<C;++M){var D=3*M,H=x[M],k=M<A?f.set(y[D],y[D+1],y[D+2]):f.assign(p.Zero);o.get1Point(H,_),N.multDirMatrix(k).multiply(b).add(_),o.set1Point(H,k)}var v=i?N.submatrix.transpose().inverse():null,B=l._skinCoordIndex.getValue(),I=l._skinCoordWeight.getValue(),T=l._skinCoordWeight.length;for(M=0;M<c;++M)H=B[M],b=M<T?I[M]:1,i&&(h.assign(s.get1Vector(H,w)),i.get1Vector(H,_),v.multVecMatrix(w).subtract(h).multiply(b).add(_),i.set1Vector(H,w)),h.assign(r.get1Point(H,f)),o.get1Point(H,_),N.multVecMatrix(f).subtract(h).multiply(b).add(_),o.set1Point(H,f)}}}})}),c})),e("x_ite/Components/HAnim/HAnimJoint",["x_ite/Fields","x_ite/Base/X3DFieldDefinition","x_ite/Base/FieldDefinitionArray","x_ite/Components/Grouping/X3DTransformNode","x_ite/Rendering/TraverseType","x_ite/Base/X3DConstants","x_ite/Base/X3DCast","standard/Math/Numbers/Matrix4"],(function(t,e,n,i,o,s,r,a){"use strict";function u(t){i.call(this,t),this.addType(s.HAnimJoint),this.setAllowedTypes(s.HAnimJoint,s.HAnimSegment,s.HAnimSite),this.displacerNodes=[],this.modelMatrix=new a}return u.prototype=Object.assign(Object.create(i.prototype),{constructor:u,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new n([new e(s.inputOutput,"metadata",new t.SFNode),new e(s.inputOutput,"name",new t.SFString),new e(s.inputOutput,"translation",new t.SFVec3f),new e(s.inputOutput,"rotation",new t.SFRotation),new e(s.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(s.inputOutput,"scaleOrientation",new t.SFRotation),new e(s.inputOutput,"center",new t.SFVec3f),new e(s.inputOutput,"llimit",new t.MFFloat),new e(s.inputOutput,"ulimit",new t.MFFloat),new e(s.inputOutput,"limitOrientation",new t.SFRotation),new e(s.inputOutput,"stiffness",new t.MFFloat(0,0,0)),new e(s.inputOutput,"skinCoordIndex",new t.MFInt32),new e(s.inputOutput,"skinCoordWeight",new t.MFFloat),new e(s.inputOutput,"displacers",new t.MFNode),new e(s.inputOutput,"visible",new t.SFBool(!0)),new e(s.inputOutput,"bboxDisplay",new t.SFBool),new e(s.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(s.initializeOnly,"bboxCenter",new t.SFVec3f),new e(s.inputOnly,"addChildren",new t.MFNode),new e(s.inputOnly,"removeChildren",new t.MFNode),new e(s.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimJoint"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"},initialize:function(){i.prototype.initialize.call(this),this._displacers.addInterest("set_displacers__",this),this.set_displacers__()},setCameraObject:function(t){i.prototype.setCameraObject.call(this,t||!!this._skinCoordIndex.length)},getModelMatrix:function(){return this.modelMatrix},getDisplacers:function(){return this.displacerNodes},set_displacers__:function(){const t=this.displacerNodes;t.length=0;for(var e=0,n=this._displacers.length;e<n;++e){const n=r(s.HAnimDisplacer,this._displacers[e]);n&&t.push(n)}},getTraverse:function(){const t=i.prototype.getTraverse();function e(e,n){e===o.CAMERA&&this.modelMatrix.assign(this.getMatrix()).multRight(n.getModelViewMatrix().get()),t.call(this,e,n)}return function(){return this._skinCoordIndex.length?e:t}}(),getGroupTraverse:function(){const t=i.prototype.getGroupTraverse();function e(e,n){e===o.CAMERA&&this.modelMatrix.assign(n.getModelViewMatrix().get()),t.call(this,e,n)}return function(){return this._skinCoordIndex.length?e:t}}()}),u})),e("x_ite/Components/HAnim/HAnimMotion",["x_ite/Fields","x_ite/Base/X3DFieldDefinition","x_ite/Base/FieldDefinitionArray","x_ite/Components/Core/X3DChildNode","x_ite/Base/X3DConstants"],(function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimMotion)}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"description",new t.SFString),new e(o.inputOutput,"enabled",new t.SFBool(!0)),new e(o.inputOnly,"next",new t.SFBool),new e(o.inputOnly,"previous",new t.SFBool),new e(o.inputOutput,"frameDuration",new t.SFTime(.1)),new e(o.inputOutput,"frameIncrement",new t.SFInt32(1)),new e(o.inputOutput,"frameIndex",new t.SFInt32(0)),new e(o.inputOutput,"loop",new t.SFBool(!1)),new e(o.inputOutput,"channels",new t.SFString),new e(o.inputOutput,"channelsEnabled",new t.MFBool),new e(o.inputOutput,"joints",new t.MFString),new e(o.inputOutput,"loa",new t.SFInt32(-1)),new e(o.inputOutput,"values",new t.MFFloat),new e(o.outputOnly,"cycleTime",new t.SFTime),new e(o.outputOnly,"elapsedTime",new t.SFTime),new e(o.outputOnly,"frameCount",new t.SFInt32)]),getTypeName:function(){return"HAnimMotion"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"},initialize:function(){i.prototype.initialize.call(this)}}),s})),e("x_ite/Components/HAnim/HAnimSegment",["x_ite/Fields","x_ite/Base/X3DFieldDefinition","x_ite/Base/FieldDefinitionArray","x_ite/Components/Grouping/X3DGroupingNode","x_ite/Base/X3DConstants"],(function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimSegment),this._mass.setUnit("mass")}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"mass",new t.SFFloat),new e(o.inputOutput,"centerOfMass",new t.SFVec3f),new e(o.inputOutput,"momentsOfInertia",new t.MFFloat(0,0,0,0,0,0,0,0,0)),new e(o.inputOutput,"displacers",new t.MFNode),new e(o.inputOutput,"coord",new t.SFNode),new e(o.inputOutput,"visible",new t.SFBool(!0)),new e(o.inputOutput,"bboxDisplay",new t.SFBool),new e(o.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(o.initializeOnly,"bboxCenter",new t.SFVec3f),new e(o.inputOnly,"addChildren",new t.MFNode),new e(o.inputOnly,"removeChildren",new t.MFNode),new e(o.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimSegment"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"}}),s})),e("x_ite/Components/HAnim/HAnimSite",["x_ite/Fields","x_ite/Base/X3DFieldDefinition","x_ite/Base/FieldDefinitionArray","x_ite/Components/Grouping/X3DTransformNode","x_ite/Base/X3DConstants"],(function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimSite)}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"translation",new t.SFVec3f),new e(o.inputOutput,"rotation",new t.SFRotation),new e(o.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(o.inputOutput,"scaleOrientation",new t.SFRotation),new e(o.inputOutput,"center",new t.SFVec3f),new e(o.inputOutput,"visible",new t.SFBool(!0)),new e(o.inputOutput,"bboxDisplay",new t.SFBool),new e(o.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(o.initializeOnly,"bboxCenter",new t.SFVec3f),new e(o.inputOnly,"addChildren",new t.MFNode),new e(o.inputOnly,"removeChildren",new t.MFNode),new e(o.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimSite"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"}}),s})),e(n.getComponentUrl("h-anim"),["x_ite/Components","x_ite/Components/HAnim/HAnimDisplacer","x_ite/Components/HAnim/HAnimHumanoid","x_ite/Components/HAnim/HAnimJoint","x_ite/Components/HAnim/HAnimMotion","x_ite/Components/HAnim/HAnimSegment","x_ite/Components/HAnim/HAnimSite"],(function(t,e,n,i,o,s,r){"use strict";t.addComponent({name:"HAnim",types:{HAnimDisplacer:e,HAnimHumanoid:n,HAnimJoint:i,HAnimMotion:o,HAnimSegment:s,HAnimSite:r},abstractTypes:{}})}))}();
