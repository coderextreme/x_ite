!function(t,e,n){var i=X3D.define;X3D.require;void 0===n&&void 0,i("x_ite/Components/HAnim/HAnimDisplacer",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Rendering/X3DGeometricPropertyNode","x_ite/Bits/X3DConstants"],function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimDisplacer),this.displacements_.setUnit("length")}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,fieldDefinitions:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"coordIndex",new t.MFInt32),new e(o.inputOutput,"weight",new t.SFFloat),new e(o.inputOutput,"displacements",new t.MFVec3f)]),getTypeName:function(){return"HAnimDisplacer"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"displacers"}}),s}),i("x_ite/Components/HAnim/HAnimHumanoid",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Core/X3DChildNode","x_ite/Components/Grouping/Group","x_ite/Components/Grouping/Transform","x_ite/Components/Grouping/X3DBoundedObject","x_ite/Bits/TraverseType","x_ite/Bits/X3DConstants","x_ite/Bits/X3DCast","standard/Math/Numbers/Matrix4","standard/Math/Numbers/Vector3"],function(t,e,n,i,o,s,r,u,a,d,p,l){"use strict";function c(t){i.call(this,t),r.call(this,t),this.addType(a.HAnimHumanoid),this.translation_.setUnit("length"),this.center_.setUnit("length"),this.bboxSize_.setUnit("length"),this.bboxCenter_.setUnit("length"),this.viewpointsNode=new o(t),this.skeletonNode=new o(t),this.skinNode=new o(t),this.transformNode=new s(t),this.jointNodes=[],this.skinNormalNode=null,this.skinCoordNode=null,this.restNormalNode=null,this.restCoordNode=null}return c.prototype=Object.assign(Object.create(i.prototype),r.prototype,{constructor:c,fieldDefinitions:new n([new e(a.inputOutput,"metadata",new t.SFNode),new e(a.inputOutput,"name",new t.SFString),new e(a.inputOutput,"version",new t.SFString),new e(a.inputOutput,"info",new t.MFString),new e(a.inputOutput,"translation",new t.SFVec3f),new e(a.inputOutput,"rotation",new t.SFRotation),new e(a.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(a.inputOutput,"scaleOrientation",new t.SFRotation),new e(a.inputOutput,"center",new t.SFVec3f),new e(a.inputOutput,"visible",new t.SFBool(!0)),new e(a.inputOutput,"bboxDisplay",new t.SFBool),new e(a.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(a.initializeOnly,"bboxCenter",new t.SFVec3f),new e(a.inputOutput,"viewpoints",new t.MFNode),new e(a.inputOutput,"sites",new t.MFNode),new e(a.inputOutput,"joints",new t.MFNode),new e(a.inputOutput,"segments",new t.MFNode),new e(a.inputOutput,"motions",new t.MFNode),new e(a.inputOutput,"skeleton",new t.MFNode),new e(a.inputOutput,"skinNormal",new t.SFNode),new e(a.inputOutput,"skinCoord",new t.SFNode),new e(a.inputOutput,"skin",new t.MFNode)]),getTypeName:function(){return"HAnimHumanoid"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"},initialize:function(){i.prototype.initialize.call(this),r.prototype.initialize.call(this),this.viewpointsNode.setAllowedTypes(a.HAnimSite),this.skeletonNode.setAllowedTypes(a.HAnimJoint,a.HAnimSite),this.viewpoints_.addFieldInterest(this.viewpointsNode.children_),this.skeleton_.addFieldInterest(this.skeletonNode.children_),this.skin_.addFieldInterest(this.skinNode.children_),this.viewpointsNode.children_=this.viewpoints_,this.skeletonNode.children_=this.skeleton_,this.skinNode.children_=this.skin_,this.viewpointsNode.setPrivate(!0),this.skeletonNode.setPrivate(!0),this.skinNode.setPrivate(!0),this.translation_.addFieldInterest(this.transformNode.translation_),this.rotation_.addFieldInterest(this.transformNode.rotation_),this.scale_.addFieldInterest(this.transformNode.scale_),this.scaleOrientation_.addFieldInterest(this.transformNode.scaleOrientation_),this.center_.addFieldInterest(this.transformNode.center_),this.bboxSize_.addFieldInterest(this.transformNode.bboxSize_),this.bboxCenter_.addFieldInterest(this.transformNode.bboxCenter_),this.transformNode.translation_=this.translation_,this.transformNode.rotation_=this.rotation_,this.transformNode.scale_=this.scale_,this.transformNode.scaleOrientation_=this.scaleOrientation_,this.transformNode.center_=this.center_,this.transformNode.bboxSize_=this.bboxSize_,this.transformNode.bboxCenter_=this.bboxCenter_,this.transformNode.children_=[this.viewpointsNode,this.skeletonNode,this.skinNode],this.transformNode.isCameraObject_.addFieldInterest(this.isCameraObject_),this.transformNode.isPickableObject_.addFieldInterest(this.isPickableObject_),this.viewpointsNode.setup(),this.skeletonNode.setup(),this.skinNode.setup(),this.transformNode.setup(),this.setCameraObject(this.transformNode.getCameraObject()),this.setPickableObject(this.transformNode.getPickableObject()),this.joints_.addInterest("set_joints__",this),this.skinNormal_.addInterest("set_skinNormal__",this),this.skinCoord_.addInterest("set_skinCoord__",this),this.set_joints__(),this.set_skinNormal__(),this.set_skinCoord__()},getBBox:function(t,e){return this.transformNode.getBBox(t,e)},set_joints__:function(){var t=this.jointNodes;t.length=0;for(var e=0,n=this.joints_.length;e<n;++e){var i=d(a.HAnimJoint,this.joints_[e]);i&&t.push(i)}},set_skinNormal__:function(){this.restNormalNode=null,this.skinNormalNode=d(a.X3DNormalNode,this.skinNormal_),this.skinNormalNode&&(this.restNormalNode=this.skinNormalNode.flatCopy())},set_skinCoord__:function(){this.restCoordNode=null,this.skinCoordNode=d(a.X3DCoordinateNode,this.skinCoord_),this.skinCoordNode&&(this.restCoordNode=this.skinCoordNode.flatCopy())},traverse:function(t,e){this.transformNode.traverse(t,e),this.skinning(t,e)},skinning:function(){var t=new p,e=new l(0,0,0),n=new l(0,0,0),i=new l(0,0,0),o=new l(0,0,0);return function(s,r){try{if(s!==u.CAMERA)return;if(!this.skinCoordNode)return;var a=this.jointNodes,d=this.skinNormalNode,p=this.skinCoordNode,c=this.restNormalNode,w=this.restCoordNode;d&&d.vector_.assign(c.vector_),p.point_.assign(w.point_),t.assign(this.transformNode.getMatrix()).multRight(r.getModelViewMatrix().get()).inverse();for(var m=0,h=a.length;m<h;++m){var _=a[m],f=_.skinCoordIndex_.length;if(0!==f){for(var F=_.getModelMatrix().multRight(t),N=_.getDisplacers(),O=0,g=N.length;O<g;++O)for(var x=N[O],C=x.coordIndex_.getValue(),S=x.coordIndex_.length,b=x.weight_.getValue(),y=x.displacements_.getValue(),A=x.displacements_.length,M=0;M<S;++M){var H=3*M,D=C[M],k=M<A?o.set(y[H],y[H+1],y[H+2]):o.assign(l.Zero);p.get1Point(D,i),F.multDirMatrix(k).multiply(b).add(i),p.set1Point(D,k)}for(var v=d?F.submatrix.transpose().inverse():null,B=_.skinCoordIndex_.getValue(),j=_.skinCoordWeight_.getValue(),I=_.skinCoordWeight_.length,M=0;M<f;++M){var D=B[M],b=M<I?j[M]:1;d&&(n.assign(c.get1Vector(D,e)),d.get1Vector(D,i),v.multVecMatrix(e).subtract(n).multiply(b).add(i),d.set1Vector(D,e)),n.assign(w.get1Point(D,o)),p.get1Point(D,i),F.multVecMatrix(o).subtract(n).multiply(b).add(i),p.set1Point(D,o)}}}}catch(t){console.log(t)}}}()}),c}),i("x_ite/Components/HAnim/HAnimJoint",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Grouping/X3DTransformNode","x_ite/Bits/TraverseType","x_ite/Bits/X3DConstants","x_ite/Bits/X3DCast","standard/Math/Numbers/Matrix4"],function(t,e,n,i,o,s,r,u){"use strict";function a(t){i.call(this,t),this.addType(s.HAnimJoint),this.setAllowedTypes(s.HAnimJoint,s.HAnimSegment,s.HAnimSite),this.displacerNodes=[],this.modelMatrix=new u}return a.prototype=Object.assign(Object.create(i.prototype),{constructor:a,fieldDefinitions:new n([new e(s.inputOutput,"metadata",new t.SFNode),new e(s.inputOutput,"name",new t.SFString),new e(s.inputOutput,"translation",new t.SFVec3f),new e(s.inputOutput,"rotation",new t.SFRotation),new e(s.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(s.inputOutput,"scaleOrientation",new t.SFRotation),new e(s.inputOutput,"center",new t.SFVec3f),new e(s.inputOutput,"llimit",new t.MFFloat),new e(s.inputOutput,"ulimit",new t.MFFloat),new e(s.inputOutput,"limitOrientation",new t.SFRotation),new e(s.inputOutput,"stiffness",new t.MFFloat(0,0,0)),new e(s.inputOutput,"skinCoordIndex",new t.MFInt32),new e(s.inputOutput,"skinCoordWeight",new t.MFFloat),new e(s.inputOutput,"displacers",new t.MFNode),new e(s.inputOutput,"visible",new t.SFBool(!0)),new e(s.inputOutput,"bboxDisplay",new t.SFBool),new e(s.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(s.initializeOnly,"bboxCenter",new t.SFVec3f),new e(s.inputOnly,"addChildren",new t.MFNode),new e(s.inputOnly,"removeChildren",new t.MFNode),new e(s.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimJoint"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"},initialize:function(){i.prototype.initialize.call(this),this.displacers_.addInterest("set_displacers__",this),this.set_displacers__()},setCameraObject:function(t){i.prototype.setCameraObject.call(this,t||!!this.skinCoordIndex_.length)},getModelMatrix:function(){return this.modelMatrix},getDisplacers:function(){return this.displacerNodes},set_displacers__:function(){const t=this.displacerNodes;t.length=0;for(var e=0,n=this.displacers_.length;e<n;++e){const n=r(s.HAnimDisplacer,this.displacers_[e]);n&&t.push(n)}},getTraverse:function(){function t(t,n){t===o.CAMERA&&this.modelMatrix.assign(this.getMatrix()).multRight(n.getModelViewMatrix().get()),e.call(this,t,n)}const e=i.prototype.getTraverse();return function(){return this.skinCoordIndex_.length?t:e}}(),getGroupTraverse:function(){function t(t,n){t===o.CAMERA&&this.modelMatrix.assign(n.getModelViewMatrix().get()),e.call(this,t,n)}const e=i.prototype.getGroupTraverse();return function(){return this.skinCoordIndex_.length?t:e}}()}),a}),i("x_ite/Components/HAnim/HAnimMotion",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Core/X3DChildNode","x_ite/Bits/X3DConstants"],function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimMotion)}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,fieldDefinitions:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"description",new t.SFString),new e(o.inputOutput,"enabled",new t.SFBool(!0)),new e(o.inputOnly,"next",new t.SFBool),new e(o.inputOnly,"previous",new t.SFBool),new e(o.inputOutput,"frameDuration",new t.SFTime(.1)),new e(o.inputOutput,"frameIncrement",new t.SFInt32(1)),new e(o.inputOutput,"frameIndex",new t.SFInt32(0)),new e(o.inputOutput,"loop",new t.SFBool(!1)),new e(o.inputOutput,"channels",new t.SFString),new e(o.inputOutput,"channelsEnabled",new t.MFBool),new e(o.inputOutput,"joints",new t.MFString),new e(o.inputOutput,"loa",new t.SFInt32(-1)),new e(o.inputOutput,"values",new t.MFFloat),new e(o.outputOnly,"cycleTime",new t.SFTime),new e(o.outputOnly,"elapsedTime",new t.SFTime),new e(o.outputOnly,"frameCount",new t.SFInt32)]),getTypeName:function(){return"HAnimMotion"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"},initialize:function(){i.prototype.initialize.call(this)}}),s}),i("x_ite/Components/HAnim/HAnimSegment",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Grouping/X3DGroupingNode","x_ite/Bits/X3DConstants"],function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimSegment),this.mass_.setUnit("mass")}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,fieldDefinitions:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"mass",new t.SFFloat),new e(o.inputOutput,"centerOfMass",new t.SFVec3f),new e(o.inputOutput,"momentsOfInertia",new t.MFFloat(0,0,0,0,0,0,0,0,0)),new e(o.inputOutput,"displacers",new t.MFNode),new e(o.inputOutput,"coord",new t.SFNode),new e(o.inputOutput,"visible",new t.SFBool(!0)),new e(o.inputOutput,"bboxDisplay",new t.SFBool),new e(o.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(o.initializeOnly,"bboxCenter",new t.SFVec3f),new e(o.inputOnly,"addChildren",new t.MFNode),new e(o.inputOnly,"removeChildren",new t.MFNode),new e(o.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimSegment"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"}}),s}),i("x_ite/Components/HAnim/HAnimSite",["x_ite/Fields","x_ite/Basic/X3DFieldDefinition","x_ite/Basic/FieldDefinitionArray","x_ite/Components/Grouping/X3DTransformNode","x_ite/Bits/X3DConstants"],function(t,e,n,i,o){"use strict";function s(t){i.call(this,t),this.addType(o.HAnimSite)}return s.prototype=Object.assign(Object.create(i.prototype),{constructor:s,fieldDefinitions:new n([new e(o.inputOutput,"metadata",new t.SFNode),new e(o.inputOutput,"name",new t.SFString),new e(o.inputOutput,"translation",new t.SFVec3f),new e(o.inputOutput,"rotation",new t.SFRotation),new e(o.inputOutput,"scale",new t.SFVec3f(1,1,1)),new e(o.inputOutput,"scaleOrientation",new t.SFRotation),new e(o.inputOutput,"center",new t.SFVec3f),new e(o.inputOutput,"visible",new t.SFBool(!0)),new e(o.inputOutput,"bboxDisplay",new t.SFBool),new e(o.initializeOnly,"bboxSize",new t.SFVec3f(-1,-1,-1)),new e(o.initializeOnly,"bboxCenter",new t.SFVec3f),new e(o.inputOnly,"addChildren",new t.MFNode),new e(o.inputOnly,"removeChildren",new t.MFNode),new e(o.inputOutput,"children",new t.MFNode)]),getTypeName:function(){return"HAnimSite"},getComponentName:function(){return"HAnim"},getContainerField:function(){return"children"}}),s}),i(X3D.getComponentUrl("h-anim"),["x_ite/Components","x_ite/Components/HAnim/HAnimDisplacer","x_ite/Components/HAnim/HAnimHumanoid","x_ite/Components/HAnim/HAnimJoint","x_ite/Components/HAnim/HAnimMotion","x_ite/Components/HAnim/HAnimSegment","x_ite/Components/HAnim/HAnimSite"],function(t,e,n,i,o,s,r){"use strict";t.addComponent({name:"HAnim",types:{HAnimDisplacer:e,HAnimHumanoid:n,HAnimJoint:i,HAnimMotion:o,HAnimSegment:s,HAnimSite:r},abstractTypes:{}})})}("undefined"!=typeof module?module:void 0,"undefined"!=typeof require?require:void 0,"undefined"!=typeof process?process:void 0);
