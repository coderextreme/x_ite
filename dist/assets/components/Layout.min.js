<<<<<<< HEAD
/* X_ITE v8.7.9 */(()=>{"use strict";var t={355:t=>{t.exports=window[Symbol.for("X_ITE.X3D-8.7.9")].require("lib/jquery")}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const t=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components");var e=i.n(t);const n=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Texturing/TextureProperties");var s=i.n(n);const o=window[Symbol.for("X_ITE.X3D-8.7.9")].require("standard/Math/Numbers/Vector3");var r=i.n(o);const a=window[Symbol.for("X_ITE.X3D-8.7.9")].require("standard/Math/Numbers/Matrix4");var u=i.n(a);const h=window[Symbol.for("X_ITE.X3D-8.7.9")].require("standard/Math/Geometry/ViewVolume");var c=i.n(h);const l=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Namespace");var d=i.n(l);const f=Symbol();function p(){}p.prototype={getScreenTextureProperties:function(){return this[f]=new(s())(this.getPrivateScene()),this[f]._boundaryModeS="CLAMP_TO_EDGE",this[f]._boundaryModeT="CLAMP_TO_EDGE",this[f]._boundaryModeR="CLAMP_TO_EDGE",this[f]._minificationFilter="NEAREST_PIXEL",this[f]._magnificationFilter="NEAREST_PIXEL",this[f]._generateMipMaps=!1,this[f]._textureCompression="DEFAULT",this[f].setup(),this.getScreenTextureProperties=function(){return this[f]},Object.defineProperty(this,"getScreenTextureProperties",{enumerable:!1}),this[f]},getScreenScaleMatrix:function(){const t=new(r())(0,0,0),e=new(r())(0,0,0),i=new(u());return function(n,s){const o=n.getModelViewMatrix().get(),a=n.getProjectionMatrix().get(),u=n.getViewVolume().getViewport();n.getViewpoint().getScreenScale(o.origin,u,t);const h=o.xAxis.normalize().multiply(t.x),l=o.yAxis.normalize().multiply(t.y),d=o.zAxis.normalize().multiply(t.x);i.set(h.x,h.y,h.z,0,l.x,l.y,l.z,0,d.x,d.y,d.z,0,o[12],o[13],o[14],1),c().projectPoint(r().Zero,i,a,u,e),e.x=Math.round(e.x),e.y=Math.round(e.y),c().unProjectPoint(e.x,e.y,e.z,i,a,u,e),e.z=0,i.translate(e),s.assign(o).inverse().multLeft(i)}}()};const y=p;d().set("x_ite/Browser/Layout/X3DLayoutContext",y);const g=y,w=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Fields");var x=i.n(w);const _=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Base/X3DFieldDefinition");var S=i.n(_);const m=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Base/FieldDefinitionArray");var X=i.n(m);const M=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Core/X3DChildNode");var T=i.n(M);const b=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Base/X3DConstants");var z=i.n(b);function N(t){T().call(this,t),this.addType(z().X3DLayoutNode)}N.prototype=Object.assign(Object.create(T().prototype),{constructor:N});const O=N;d().set("x_ite/Components/Layout/X3DLayoutNode",O);const v=O,F=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Base/X3DCast");var I=i.n(F);const C=window[Symbol.for("X_ITE.X3D-8.7.9")].require("standard/Math/Numbers/Vector2");var E=i.n(C);const L=window[Symbol.for("X_ITE.X3D-8.7.9")].require("standard/Math/Numbers/Rotation4");var D=i.n(L);let U=0;const B=U++,Y=U++,P=U++,R=U++,G=U++,V=U++,A=U++,q=U++,j=U++,k=U++;function W(t){v.call(this,t),this.addType(z().Layout),this.alignX=Y,this.alignY=Y,this.offsetUnitX=V,this.offsetUnitY=V,this.offsetX=0,this.offsetY=0,this.sizeUnitX=V,this.sizeUnitY=V,this.sizeX=1,this.sizeY=1,this.scaleModeX=j,this.scaleModeY=j,this.parent=null,this.rectangleCenter=new(E())(0,0),this.rectangleSize=new(E())(0,0),this.matrix=new(u())}W.prototype=Object.assign(Object.create(v.prototype),{constructor:W,viewportPixel:new(E())(0,0),pixelSize:new(E())(0,0),translation:new(r())(0,0,0),offset:new(r())(0,0,0),scale:new(r())(1,1,1),currentTranslation:new(r())(0,0,0),currentRotation:new(D()),currentScale:new(r())(0,0,0),modelViewMatrix:new(u()),[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(X())([new(S())(z().inputOutput,"metadata",new(x().SFNode)),new(S())(z().inputOutput,"align",new(x().MFString)("CENTER","CENTER")),new(S())(z().inputOutput,"offsetUnits",new(x().MFString)("WORLD","WORLD")),new(S())(z().inputOutput,"offset",new(x().MFFloat)(0,0)),new(S())(z().inputOutput,"sizeUnits",new(x().MFString)("WORLD","WORLD")),new(S())(z().inputOutput,"size",new(x().MFFloat)(1,1)),new(S())(z().inputOutput,"scaleMode",new(x().MFString)("NONE","NONE"))]),getTypeName:function(){return"Layout"},getComponentName:function(){return"Layout"},getContainerField:function(){return"layout"},getSpecificationRange:function(){return["3.2","Infinity"]},initialize:function(){v.prototype.initialize.call(this),this._align.addInterest("set_align__",this),this._offsetUnits.addInterest("set_offsetUnits__",this),this._offset.addInterest("set_offset__",this),this._sizeUnits.addInterest("set_sizeUnits__",this),this._size.addInterest("set_size__",this),this._scaleMode.addInterest("set_scaleMode__",this),this.set_align__(),this.set_offsetUnits__(),this.set_offset__(),this.set_sizeUnits__(),this.set_size__(),this.set_scaleMode__()},set_align__:function(){this._align.length>0?"LEFT"===this._align[0]?this.alignX=B:"RIGHT"===this._align[0]?this.alignX=P:this.alignX=Y:this.alignX=Y,this._align.length>1?"BOTTOM"===this._align[1]?this.alignY=R:"TOP"===this._align[1]?this.alignY=G:this.alignY=Y:this.alignY=Y},set_offsetUnits__:function(){this._offsetUnits.length>0?("FRACTION"===this._offsetUnits[0]?this.offsetUnitX=A:"PIXEL"===this._offsetUnits[0]?this.offsetUnitX=q:this.offsetUnitX=V,this._offsetUnits.length>1?"FRACTION"===this._offsetUnits[1]?this.offsetUnitY=A:"PIXEL"===this._offsetUnits[1]?this.offsetUnitY=q:this.offsetUnitY=V:this.offsetUnitY=this.offsetUnitX):(this.offsetUnitX=V,this.offsetUnitY=V)},set_offset__:function(){this._offset.length>0?(this.offsetX=this._offset[0],this._offset.length>1?this.offsetY=this._offset[1]:this.offsetY=offsetX):(this.offsetX=0,this.offsetY=0)},set_sizeUnits__:function(){this._sizeUnits.length>0?("FRACTION"===this._sizeUnits[0]?this.sizeUnitX=A:"PIXEL"===this._sizeUnits[0]?this.sizeUnitX=q:this.sizeUnitX=V,this._sizeUnits.length>1?"FRACTION"===this._sizeUnits[1]?this.sizeUnitY=A:"PIXEL"===this._sizeUnits[1]?this.sizeUnitY=q:this.sizeUnitY=V:this.sizeUnitY=this.sizeUnitX):(this.sizeUnitX=V,this.sizeUnitY=V)},set_size__:function(){this._size.length>0?(this.sizeX=this._size[0],this._size.length>1?this.sizeY=this._size[1]:this.sizeY=this.sizeX):(this.sizeX=0,this.sizeY=0)},set_scaleMode__:function(){this._scaleMode.length>0?("FRACTION"===this._scaleMode[0]?this.scaleModeX=A:"PIXEL"===this._scaleMode[0]?this.scaleModeX=q:"STRETCH"===this._scaleMode[0]?this.scaleModeX=k:this.scaleModeX=j,this._scaleMode.length>1?"FRACTION"===this._scaleMode[1]?this.scaleModeY=A:"PIXEL"===this._scaleMode[1]?this.scaleModeY=q:"STRETCH"===this._scaleMode[1]?this.scaleModeY=k:this.scaleModeY=j:this.scaleModeY=this.scaleModeX):(this.scaleModeX=j,this.scaleModeY=j)},getRectangleCenter:function(){return this.rectangleCenter},getRectangleSize:function(){return this.rectangleSize},getAlignX:function(){return this.alignX},getAlignY:function(){return this.alignY},getOffsetUnitX:function(){return this.offsetUnitX===V?this.parent?this.parent.getOffsetUnitX():A:this.offsetUnitX},getOffsetUnitY:function(){return this.offsetUnitY===V?this.parent?this.parent.getOffsetUnitY():A:this.offsetUnitY},getOffsetX:function(){return this.offsetX},getOffsetY:function(){return this.offsetY},getSizeUnitX:function(){return this.sizeUnitX===V?this.parent?this.parent.getSizeUnitX():A:this.sizeUnitX},getSizeUnitY:function(){return this.sizeUnitY===V?this.parent?this.parent.getSizeUnitY():A:this.sizeUnitY},getSizeX:function(){return this.sizeX},getSizeY:function(){return this.sizeY},getScaleModeX:function(){return this.parent?this.scaleModeX:this.scaleModeX===j?A:this.scaleModeX},getScaleModeY:function(){return this.parent?this.scaleModeY:this.scaleModeY===j?A:this.scaleModeY},transform:function(t,e){const i=this.parent=e.getParentLayout(),n=this.getBrowser().getRenderingProperty("ContentScale"),s=this.matrix,o=e.getViewpoint(),r=e.getNavigationInfo().getNearValue(),a=e.getViewVolume().getScissor(),u=o.getViewportSize(a,r),h=this.viewportPixel,c=this.pixelSize,l=i?i.getRectangleSize():u,d=this.rectangleSize,f=this.rectangleCenter;switch(h.set(a[2],a[3]).divide(n),c.assign(u).divVec(h),this.getSizeUnitX()){case A:d.x=this.sizeX*l.x;break;case q:d.x=this.sizeX*c.x}switch(this.getSizeUnitY()){case A:d.y=this.sizeY*l.y;break;case q:d.y=this.sizeY*c.y}const p=this.translation.set(0,0,0);switch(this.getAlignX()){case B:p.x=-(l.x-d.x)/2;break;case Y:this.getSizeUnitX()===q&&1&h.x&&(p.x=-c.x/2);break;case P:p.x=(l.x-d.x)/2}switch(this.getAlignY()){case R:p.y=-(l.y-d.y)/2;break;case Y:this.getSizeUnitX===q&&1&h.y&&(p.y=-c.y/2);break;case G:p.y=(l.y-d.y)/2}const y=this.offset.set(0,0,0);switch(this.getOffsetUnitX()){case A:y.x=this.offsetX*l.x;break;case q:y.x=this.offsetX*u.x/h.x}switch(this.getOffsetUnitY()){case A:y.y=this.offsetY*l.y;break;case q:y.y=this.offsetY*u.y/h.y}const g=this.scale.set(1,1,1),w=this.currentTranslation,x=this.currentRotation,_=this.currentScale;switch(e.getModelViewMatrix().get().get(w,x,_),this.getScaleModeX()){case j:g.x=_.x;break;case A:g.x=d.x;break;case k:break;case q:g.x=u.x/h.x}switch(this.getScaleModeY()){case j:g.y=_.y;break;case A:g.y=d.y;break;case k:break;case q:g.y=u.y/h.y}return this.getScaleModeX()===k?this.getScaleModeY()===k?d.x>d.y?(g.x=d.x,g.y=g.x):(g.y=d.y,g.x=g.y):g.x=g.y:this.getScaleModeY()===k&&(g.y=g.x),f.assign(p.add(y)),s.set(w,x),s.translate(p),s.scale(g),s}});const H=W;d().set("x_ite/Components/Layout/Layout",H);const K=H,Z=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Grouping/X3DGroupingNode");var Q=i.n(Z);const J=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Rendering/TraverseType");var $=i.n(J);function tt(t){Q().call(this,t),this.addType(z().LayoutGroup),this.viewportNode=null,this.layoutNode=null,this.matrix=new(u()),this.modelViewMatrix=new(u()),this.screenMatrix=new(u())}tt.prototype=Object.assign(Object.create(Q().prototype),{constructor:tt,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(X())([new(S())(z().inputOutput,"metadata",new(x().SFNode)),new(S())(z().inputOutput,"layout",new(x().SFNode)),new(S())(z().inputOutput,"viewport",new(x().SFNode)),new(S())(z().inputOutput,"visible",new(x().SFBool)(!0)),new(S())(z().inputOutput,"bboxDisplay",new(x().SFBool)),new(S())(z().initializeOnly,"bboxSize",new(x().SFVec3f)(-1,-1,-1)),new(S())(z().initializeOnly,"bboxCenter",new(x().SFVec3f)),new(S())(z().inputOnly,"addChildren",new(x().MFNode)),new(S())(z().inputOnly,"removeChildren",new(x().MFNode)),new(S())(z().inputOutput,"children",new(x().MFNode))]),getTypeName:function(){return"LayoutGroup"},getComponentName:function(){return"Layout"},getContainerField:function(){return"children"},getSpecificationRange:function(){return["3.2","Infinity"]},initialize:function(){Q().prototype.initialize.call(this),this._viewport.addInterest("set_viewport__",this),this._layout.addInterest("set_layout__",this),this.set_viewport__(),this.set_layout__()},set_viewport__:function(){this.viewportNode=I()(z().X3DViewportNode,this._viewport)},set_layout__:function(){this.layoutNode=I()(z().X3DLayoutNode,this._layout)},getBBox:function(t,e){return Q().prototype.getBBox.call(this,t,e).multRight(this.getMatrix())},getMatrix:function(){return this.layoutNode?this.matrix.assign(this.modelViewMatrix).inverse().multLeft(this.screenMatrix):this.matrix.identity()},getLayout:function(){return this.layoutNode},traverse:function(t,e){if(t!==$().COLLISION){if(this.viewportNode&&this.viewportNode.push(),this.layoutNode){const i=e.getModelViewMatrix();this.modelViewMatrix.assign(i.get()),this.screenMatrix.assign(this.layoutNode.transform(t,e)),i.pushMatrix(this.screenMatrix),e.getLayouts().push(this.layoutNode),Q().prototype.traverse.call(this,t,e),e.getLayouts().pop(),i.pop()}else Q().prototype.traverse.call(this,t,e);this.viewportNode&&this.viewportNode.pop()}}});const et=tt;d().set("x_ite/Components/Layout/LayoutGroup",et);const it=et,nt=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Layering/X3DLayerNode");var st=i.n(nt);const ot=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Navigation/OrthoViewpoint");var rt=i.n(ot);function at(t){st().call(this,t,new(rt())(t),new it(t)),this.addType(z().LayoutLayer)}at.prototype=Object.assign(Object.create(st().prototype),{constructor:at,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(X())([new(S())(z().inputOutput,"metadata",new(x().SFNode)),new(S())(z().inputOutput,"pickable",new(x().SFBool)(!0)),new(S())(z().inputOutput,"objectType",new(x().MFString)("ALL")),new(S())(z().inputOutput,"visible",new(x().SFBool)(!0)),new(S())(z().inputOutput,"layout",new(x().SFNode)),new(S())(z().inputOutput,"viewport",new(x().SFNode)),new(S())(z().inputOnly,"addChildren",new(x().MFNode)),new(S())(z().inputOnly,"removeChildren",new(x().MFNode)),new(S())(z().inputOutput,"children",new(x().MFNode))]),getTypeName:function(){return"LayoutLayer"},getComponentName:function(){return"Layout"},getContainerField:function(){return"layers"},getSpecificationRange:function(){return["3.2","Infinity"]},initialize:function(){st().prototype.initialize.call(this),this._layout.addFieldInterest(this.getGroup()._layout),this._addChildren.addFieldInterest(this.getGroup()._addChildren),this._removeChildren.addFieldInterest(this.getGroup()._removeChildren),this._children.addFieldInterest(this.getGroup()._children),this.getGroup()._layout=this._layout,this.getGroup()._children=this._children,this.getGroup().setPrivate(!0),this.getGroup().setup()}});const ut=at;d().set("x_ite/Components/Layout/LayoutLayer",ut);const ht=ut,ct=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Text/X3DFontStyleNode");var lt=i.n(ct);const dt=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Browser/Text/X3DTextGeometry");var ft=i.n(dt);const pt=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Browser/Text/TextAlignment");var yt=i.n(pt);const gt=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Texturing/PixelTexture");var wt=i.n(gt);const xt=window[Symbol.for("X_ITE.X3D-8.7.9")].require("x_ite/Components/Rendering/X3DGeometryNode");var _t=i.n(xt);const St=window[Symbol.for("X_ITE.X3D-8.7.9")].require("standard/Math/Geometry/Box3");var mt=i.n(St);const Xt=window[Symbol.for("X_ITE.X3D-8.7.9")].require("standard/Math/Algorithm");var Mt=i.n(Xt),Tt=i(355);function bt(t,e){ft().call(this,t,e),t.setTransparent(!0),this.texCoordArray=_t().createArray(),this.textureNode=new(wt())(t.getExecutionContext()),this.canvas=Tt("<canvas></canvas>"),this.context=this.canvas[0].getContext("2d",{willReadFrequently:!0}),this.matrix=new(u()),this.textureNode._textureProperties=e.getBrowser().getScreenTextureProperties(),this.textureNode.setup()}bt.prototype=Object.assign(Object.create(ft().prototype),{constructor:bt,modelViewMatrix:new(u()),isTransparent:function(){return!0},getMatrix:function(){return this.matrix},update:function(){const t=new(r())(0,0,0),e=new(r())(1,1,0);return function(){ft().prototype.update.call(this);const i=this.getFontStyle(),n=this.getText();switch(n._textBounds.x=Math.ceil(n._textBounds.x)+1,n._textBounds.y=Math.ceil(n._textBounds.y)+1,this.getBBox().getExtents(t,e),t.x-=1,t.y-=1,i.getMajorAlignment()){case yt().BEGIN:case yt().FIRST:t.x=Math.floor(t.x),e.x=t.x+n._textBounds.x;break;case yt().MIDDLE:t.x=Math.round(t.x),e.x=t.x+n._textBounds.x;break;case yt().END:e.x=Math.ceil(e.x),t.x=e.x-n._textBounds.x}switch(i.getMinorAlignment()){case yt().BEGIN:case yt().FIRST:e.y=Math.ceil(e.y),t.y=e.y-n._textBounds.y;break;case yt().MIDDLE:e.y=Math.round(e.y),t.y=e.y-n._textBounds.y;break;case yt().END:t.y=Math.floor(t.y),e.y=t.y+n._textBounds.y}n._origin.x=t.x,n._origin.y=e.y,this.getBBox().setExtents(t,e)}}(),build:function(){const t=new(r())(0,0,0),e=new(r())(1,1,0);return function(){const i=this.getFontStyle(),n=i.getFont();if(!n)return;const s=this.getText(),o=this.getGlyphs(),r=this.getMinorAlignment(),a=this.getTranslations(),u=this.getCharSpacings(),h=i.getScale(),c=h/n.unitsPerEm,l=this.texCoordArray,d=s.getNormals(),f=s.getVertices(),p=this.canvas[0],y=this.context;l.length=0,s.getMultiTexCoords().push(l),this.getBBox().getExtents(t,e),d.push(0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1),f.push(t.x,t.y,0,1,e.x,t.y,0,1,e.x,e.y,0,1,t.x,t.y,0,1,e.x,e.y,0,1,t.x,e.y,0,1);const g=s._textBounds.x,w=s._textBounds.y;p.width=Mt().nextPowerOfTwo(g),p.height=Mt().nextPowerOfTwo(w);const x=g/p.width,_=1-w/p.height;if(l.push(0,_,0,1,x,_,0,1,x,1,0,1,0,_,0,1,x,1,0,1,0,1,0,1),y.fillStyle="rgba(255,255,255,0)",y.fillRect(0,0,p.width,p.height),y.fillStyle="rgba(255,255,255,1)",y.save(),y.translate(0,p.height),y.scale(1,-1),i._horizontal.getValue())for(let i=0,s=o.length;i<s;++i){const s=o[i],l=u[i],d=a[i];let f=0;for(let i=0,o=s.length;i<o;++i){const o=s[i],a=r.x+d.x+f+i*l-t.x,u=r.y+d.y-e.y;this.drawGlyph(y,n,o,a,u,h);let p=0;i+1<s.length&&(p=n.getKerningValue(o,s[i+1])),f+=(o.advanceWidth+p)*c}}else{const u=i._leftToRight.getValue(),c=i._topToBottom.getValue(),l=u?0:s._string.length-1,d=u?s._string.length:-1,f=u?1:-1;for(let i=l,s=0;i!==d;i+=f){const u=o[i],l=u.length,d=c?l:-1,f=c?1:-1;for(let i=c?0:l-1;i!==d;i+=f,++s){const o=a[s],c=r.x+o.x-t.x,l=r.y+o.y-e.y;this.drawGlyph(y,n,u[i],c,l,h)}}}y.restore();const S=y.getImageData(0,0,p.width,p.height);S?this.textureNode.setTexture(p.width,p.height,!0,new Uint8Array(S.data.buffer),!1):this.textureNode.clear()}}(),drawGlyph:function(t,e,i,n,s,o){const r=i.getPath(n,-s,o),a=r.commands;t.beginPath();for(let e=0,i=a.length;e<i;++e){const i=a[e];switch(i.type){case"M":t.moveTo(i.x,i.y);continue;case"Z":t.closePath();continue;case"L":t.lineTo(i.x,i.y);continue;case"Q":t.quadraticCurveTo(i.x1,i.y1,i.x,i.y);continue;case"C":t.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y);continue}}r.fill&&t.fill(),r.stroke&&(t.lineWidth=r.strokeWidth,t.stroke())},getGlyphExtents:function(t,e,i,n,s){const o=t.unitsPerEm;n.set((e.xMin||0)/o,(e.yMin||0)/o,0),s.set((e.xMax||0)/o,(e.yMax||0)/o,0)},traverse:function(){const t=new(mt());return function(e,i){this.getBrowser().getScreenScaleMatrix(i,this.matrix),t.assign(this.getBBox()).multRight(this.matrix),this.getText().setBBox(t)}}(),display:function(t,e){u().prototype.multLeft.call(e.modelViewMatrix,this.matrix),e.textureNode=this.textureNode},transformLine:function(){const t=new(u());return function(e){return e.multLineMatrix(t.assign(this.matrix).inverse())}}(),transformMatrix:function(t){return t.multLeft(this.matrix)}});const zt=bt;d().set("x_ite/Browser/Layout/ScreenText",zt);const Nt=zt;function Ot(t){lt().call(this,t),this.addType(z().ScreenFontStyle)}Ot.prototype=Object.assign(Object.create(lt().prototype),{constructor:Ot,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(X())([new(S())(z().inputOutput,"metadata",new(x().SFNode)),new(S())(z().inputOutput,"language",new(x().SFString)),new(S())(z().inputOutput,"family",new(x().MFString)("SERIF")),new(S())(z().inputOutput,"style",new(x().SFString)("PLAIN")),new(S())(z().inputOutput,"pointSize",new(x().SFFloat)(12)),new(S())(z().inputOutput,"spacing",new(x().SFFloat)(1)),new(S())(z().inputOutput,"horizontal",new(x().SFBool)(!0)),new(S())(z().inputOutput,"leftToRight",new(x().SFBool)(!0)),new(S())(z().inputOutput,"topToBottom",new(x().SFBool)(!0)),new(S())(z().inputOutput,"justify",new(x().MFString)("BEGIN"))]),getTypeName:function(){return"ScreenFontStyle"},getComponentName:function(){return"Layout"},getContainerField:function(){return"fontStyle"},getSpecificationRange:function(){return["3.2","Infinity"]},initialize:function(){lt().prototype.initialize.call(this),this.getBrowser().getRenderingProperties()._ContentScale.addInterest("addNodeEvent",this)},getTextGeometry:function(t){return new Nt(t,this)},getScale:function(){return this._pointSize.getValue()*this.getBrowser().getPixelPerPoint()}});const vt=Ot;d().set("x_ite/Components/Layout/ScreenFontStyle",vt);const Ft=vt;function It(t){Q().call(this,t),this.addType(z().ScreenGroup),this.matrix=new(u())}It.prototype=Object.assign(Object.create(Q().prototype),{constructor:It,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(X())([new(S())(z().inputOutput,"metadata",new(x().SFNode)),new(S())(z().inputOutput,"visible",new(x().SFBool)(!0)),new(S())(z().inputOutput,"bboxDisplay",new(x().SFBool)),new(S())(z().initializeOnly,"bboxSize",new(x().SFVec3f)(-1,-1,-1)),new(S())(z().initializeOnly,"bboxCenter",new(x().SFVec3f)),new(S())(z().inputOnly,"addChildren",new(x().MFNode)),new(S())(z().inputOnly,"removeChildren",new(x().MFNode)),new(S())(z().inputOutput,"children",new(x().MFNode))]),getTypeName:function(){return"ScreenGroup"},getComponentName:function(){return"Layout"},getContainerField:function(){return"children"},getSpecificationRange:function(){return["3.2","Infinity"]},getBBox:function(t,e){return this.getSubBBox(t,e).multRight(this.matrix)},getMatrix:function(){return this.matrix},traverse:function(t,e){switch(t){case $().CAMERA:case $().PICKING:case $().SHADOW:break;default:this.getBrowser().getScreenScaleMatrix(e,this.matrix)}const i=e.getModelViewMatrix();i.push(),i.multLeft(this.matrix),Q().prototype.traverse.call(this,t,e),i.pop()}});const Ct=It;d().set("x_ite/Components/Layout/ScreenGroup",Ct);const Et=Ct;e().addComponent({name:"Layout",types:{Layout:K,LayoutGroup:it,LayoutLayer:ht,ScreenFontStyle:Ft,ScreenGroup:Et},abstractTypes:{X3DLayoutNode:v},browserContext:g});const Lt=void 0;d().set("assets/components/Layout",Lt)})()})();
=======
/* X_ITE v8.7.8 */(()=>{"use strict";var e={355:e=>{e.exports=window[Symbol.for("X_ITE.X3D-8.7.8")].require("lib/jquery")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components");var t=i.n(e);const n=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Texturing/TextureProperties");var s=i.n(n);const o=window[Symbol.for("X_ITE.X3D-8.7.8")].require("standard/Math/Numbers/Vector3");var r=i.n(o);const a=window[Symbol.for("X_ITE.X3D-8.7.8")].require("standard/Math/Numbers/Matrix4");var l=i.n(a);const h=window[Symbol.for("X_ITE.X3D-8.7.8")].require("standard/Math/Geometry/ViewVolume");var u=i.n(h);const c=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Namespace");var d=i.n(c);const p=Symbol();function y(){}Object.assign(y.prototype,{getScreenTextureProperties(){return this[p]=new(s())(this.getPrivateScene()),this[p]._boundaryModeS="CLAMP_TO_EDGE",this[p]._boundaryModeT="CLAMP_TO_EDGE",this[p]._boundaryModeR="CLAMP_TO_EDGE",this[p]._minificationFilter="NEAREST_PIXEL",this[p]._magnificationFilter="NEAREST_PIXEL",this[p]._generateMipMaps=!1,this[p]._textureCompression="DEFAULT",this[p].setup(),this.getScreenTextureProperties=function(){return this[p]},Object.defineProperty(this,"getScreenTextureProperties",{enumerable:!1}),this[p]},getScreenScaleMatrix:function(){const e=new(r())(0,0,0),t=new(r())(0,0,0),i=new(l());return function(n,s){const o=n.getModelViewMatrix().get(),a=n.getProjectionMatrix().get(),l=n.getViewVolume().getViewport();n.getViewpoint().getScreenScale(o.origin,l,e);const h=o.xAxis.normalize().multiply(e.x),c=o.yAxis.normalize().multiply(e.y),d=o.zAxis.normalize().multiply(e.x);i.set(h.x,h.y,h.z,0,c.x,c.y,c.z,0,d.x,d.y,d.z,0,o[12],o[13],o[14],1),u().projectPoint(r().Zero,i,a,l,t),t.x=Math.round(t.x),t.y=Math.round(t.y),u().unProjectPoint(t.x,t.y,t.z,i,a,l,t),t.z=0,i.translate(t),s.assign(o).inverse().multLeft(i)}}()});const f=y;d().set("x_ite/Browser/Layout/X3DLayoutContext",f);const g=f,w=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Fields");var x=i.n(w);const _=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Base/X3DFieldDefinition");var m=i.n(_);const S=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Base/FieldDefinitionArray");var b=i.n(S);const X=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Core/X3DChildNode");var M=i.n(X);const O=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Base/X3DConstants");var v=i.n(O);function z(e){M().call(this,e),this.addType(v().X3DLayoutNode)}Object.setPrototypeOf(z.prototype,M().prototype),Object.defineProperties(z,{typeName:{value:"X3DLayoutNode",enumerable:!0},componentName:{value:"Layout",enumerable:!0}});const T=z;d().set("x_ite/Components/Layout/X3DLayoutNode",T);const N=T,F=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Base/X3DCast");var I=i.n(F);const E=window[Symbol.for("X_ITE.X3D-8.7.8")].require("standard/Math/Numbers/Vector2");var L=i.n(E);const U=window[Symbol.for("X_ITE.X3D-8.7.8")].require("standard/Math/Numbers/Rotation4");var D=i.n(U);let C=0;const B=C++,Y=C++,P=C++,R=C++,V=C++,j=C++,A=C++,G=C++,q=C++,k=C++;function W(e){N.call(this,e),this.addType(v().Layout),this.alignX=Y,this.alignY=Y,this.offsetUnitX=j,this.offsetUnitY=j,this.offsetX=0,this.offsetY=0,this.sizeUnitX=j,this.sizeUnitY=j,this.sizeX=1,this.sizeY=1,this.scaleModeX=q,this.scaleModeY=q,this.parent=null,this.rectangleCenter=new(L())(0,0),this.rectangleSize=new(L())(0,0),this.matrix=new(l())}Object.assign(Object.setPrototypeOf(W.prototype,N.prototype),{viewportPixel:new(L())(0,0),pixelSize:new(L())(0,0),translation:new(r())(0,0,0),offset:new(r())(0,0,0),scale:new(r())(1,1,1),currentTranslation:new(r())(0,0,0),currentRotation:new(D()),currentScale:new(r())(0,0,0),modelViewMatrix:new(l()),initialize(){N.prototype.initialize.call(this),this._align.addInterest("set_align__",this),this._offsetUnits.addInterest("set_offsetUnits__",this),this._offset.addInterest("set_offset__",this),this._sizeUnits.addInterest("set_sizeUnits__",this),this._size.addInterest("set_size__",this),this._scaleMode.addInterest("set_scaleMode__",this),this.set_align__(),this.set_offsetUnits__(),this.set_offset__(),this.set_sizeUnits__(),this.set_size__(),this.set_scaleMode__()},set_align__(){this._align.length>0?"LEFT"===this._align[0]?this.alignX=B:"RIGHT"===this._align[0]?this.alignX=P:this.alignX=Y:this.alignX=Y,this._align.length>1?"BOTTOM"===this._align[1]?this.alignY=R:"TOP"===this._align[1]?this.alignY=V:this.alignY=Y:this.alignY=Y},set_offsetUnits__(){this._offsetUnits.length>0?("FRACTION"===this._offsetUnits[0]?this.offsetUnitX=A:"PIXEL"===this._offsetUnits[0]?this.offsetUnitX=G:this.offsetUnitX=j,this._offsetUnits.length>1?"FRACTION"===this._offsetUnits[1]?this.offsetUnitY=A:"PIXEL"===this._offsetUnits[1]?this.offsetUnitY=G:this.offsetUnitY=j:this.offsetUnitY=this.offsetUnitX):(this.offsetUnitX=j,this.offsetUnitY=j)},set_offset__(){this._offset.length>0?(this.offsetX=this._offset[0],this._offset.length>1?this.offsetY=this._offset[1]:this.offsetY=offsetX):(this.offsetX=0,this.offsetY=0)},set_sizeUnits__(){this._sizeUnits.length>0?("FRACTION"===this._sizeUnits[0]?this.sizeUnitX=A:"PIXEL"===this._sizeUnits[0]?this.sizeUnitX=G:this.sizeUnitX=j,this._sizeUnits.length>1?"FRACTION"===this._sizeUnits[1]?this.sizeUnitY=A:"PIXEL"===this._sizeUnits[1]?this.sizeUnitY=G:this.sizeUnitY=j:this.sizeUnitY=this.sizeUnitX):(this.sizeUnitX=j,this.sizeUnitY=j)},set_size__(){this._size.length>0?(this.sizeX=this._size[0],this._size.length>1?this.sizeY=this._size[1]:this.sizeY=this.sizeX):(this.sizeX=0,this.sizeY=0)},set_scaleMode__(){this._scaleMode.length>0?("FRACTION"===this._scaleMode[0]?this.scaleModeX=A:"PIXEL"===this._scaleMode[0]?this.scaleModeX=G:"STRETCH"===this._scaleMode[0]?this.scaleModeX=k:this.scaleModeX=q,this._scaleMode.length>1?"FRACTION"===this._scaleMode[1]?this.scaleModeY=A:"PIXEL"===this._scaleMode[1]?this.scaleModeY=G:"STRETCH"===this._scaleMode[1]?this.scaleModeY=k:this.scaleModeY=q:this.scaleModeY=this.scaleModeX):(this.scaleModeX=q,this.scaleModeY=q)},getRectangleCenter(){return this.rectangleCenter},getRectangleSize(){return this.rectangleSize},getAlignX(){return this.alignX},getAlignY(){return this.alignY},getOffsetUnitX(){return this.offsetUnitX===j?this.parent?this.parent.getOffsetUnitX():A:this.offsetUnitX},getOffsetUnitY(){return this.offsetUnitY===j?this.parent?this.parent.getOffsetUnitY():A:this.offsetUnitY},getOffsetX(){return this.offsetX},getOffsetY(){return this.offsetY},getSizeUnitX(){return this.sizeUnitX===j?this.parent?this.parent.getSizeUnitX():A:this.sizeUnitX},getSizeUnitY(){return this.sizeUnitY===j?this.parent?this.parent.getSizeUnitY():A:this.sizeUnitY},getSizeX(){return this.sizeX},getSizeY(){return this.sizeY},getScaleModeX(){return this.parent?this.scaleModeX:this.scaleModeX===q?A:this.scaleModeX},getScaleModeY(){return this.parent?this.scaleModeY:this.scaleModeY===q?A:this.scaleModeY},transform(e,t){const i=this.parent=t.getParentLayout(),n=this.getBrowser().getRenderingProperty("ContentScale"),s=this.matrix,o=t.getViewpoint(),r=t.getNavigationInfo().getNearValue(),a=t.getViewVolume().getScissor(),l=o.getViewportSize(a,r),h=this.viewportPixel,u=this.pixelSize,c=i?i.getRectangleSize():l,d=this.rectangleSize,p=this.rectangleCenter;switch(h.set(a[2],a[3]).divide(n),u.assign(l).divVec(h),this.getSizeUnitX()){case A:d.x=this.sizeX*c.x;break;case G:d.x=this.sizeX*u.x}switch(this.getSizeUnitY()){case A:d.y=this.sizeY*c.y;break;case G:d.y=this.sizeY*u.y}const y=this.translation.set(0,0,0);switch(this.getAlignX()){case B:y.x=-(c.x-d.x)/2;break;case Y:this.getSizeUnitX()===G&&1&h.x&&(y.x=-u.x/2);break;case P:y.x=(c.x-d.x)/2}switch(this.getAlignY()){case R:y.y=-(c.y-d.y)/2;break;case Y:this.getSizeUnitX===G&&1&h.y&&(y.y=-u.y/2);break;case V:y.y=(c.y-d.y)/2}const f=this.offset.set(0,0,0);switch(this.getOffsetUnitX()){case A:f.x=this.offsetX*c.x;break;case G:f.x=this.offsetX*l.x/h.x}switch(this.getOffsetUnitY()){case A:f.y=this.offsetY*c.y;break;case G:f.y=this.offsetY*l.y/h.y}const g=this.scale.set(1,1,1),w=this.currentTranslation,x=this.currentRotation,_=this.currentScale;switch(t.getModelViewMatrix().get().get(w,x,_),this.getScaleModeX()){case q:g.x=_.x;break;case A:g.x=d.x;break;case k:break;case G:g.x=l.x/h.x}switch(this.getScaleModeY()){case q:g.y=_.y;break;case A:g.y=d.y;break;case k:break;case G:g.y=l.y/h.y}return this.getScaleModeX()===k?this.getScaleModeY()===k?d.x>d.y?(g.x=d.x,g.y=g.x):(g.y=d.y,g.x=g.y):g.x=g.y:this.getScaleModeY()===k&&(g.y=g.x),p.assign(y.add(f)),s.set(w,x),s.translate(y),s.scale(g),s}}),Object.defineProperties(W,{typeName:{value:"Layout",enumerable:!0},componentName:{value:"Layout",enumerable:!0},containerField:{value:"layout",enumerable:!0},specificationRange:{value:Object.freeze(["3.2","Infinity"]),enumerable:!0},fieldDefinitions:{value:new(b())([new(m())(v().inputOutput,"metadata",new(x().SFNode)),new(m())(v().inputOutput,"align",new(x().MFString)("CENTER","CENTER")),new(m())(v().inputOutput,"offsetUnits",new(x().MFString)("WORLD","WORLD")),new(m())(v().inputOutput,"offset",new(x().MFFloat)(0,0)),new(m())(v().inputOutput,"sizeUnits",new(x().MFString)("WORLD","WORLD")),new(m())(v().inputOutput,"size",new(x().MFFloat)(1,1)),new(m())(v().inputOutput,"scaleMode",new(x().MFString)("NONE","NONE"))]),enumerable:!0}});const H=W;d().set("x_ite/Components/Layout/Layout",H);const K=H,Z=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Grouping/X3DGroupingNode");var Q=i.n(Z);const J=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Rendering/TraverseType");var $=i.n(J);function ee(e){Q().call(this,e),this.addType(v().LayoutGroup),this.viewportNode=null,this.layoutNode=null,this.matrix=new(l()),this.modelViewMatrix=new(l()),this.screenMatrix=new(l())}Object.assign(Object.setPrototypeOf(ee.prototype,Q().prototype),{initialize(){Q().prototype.initialize.call(this),this._viewport.addInterest("set_viewport__",this),this._layout.addInterest("set_layout__",this),this.set_viewport__(),this.set_layout__()},set_viewport__(){this.viewportNode=I()(v().X3DViewportNode,this._viewport)},set_layout__(){this.layoutNode=I()(v().X3DLayoutNode,this._layout)},getBBox(e,t){return Q().prototype.getBBox.call(this,e,t).multRight(this.getMatrix())},getMatrix(){return this.layoutNode?this.matrix.assign(this.modelViewMatrix).inverse().multLeft(this.screenMatrix):this.matrix.identity()},getLayout(){return this.layoutNode},traverse(e,t){if(e!==$().COLLISION){if(this.viewportNode&&this.viewportNode.push(),this.layoutNode){const i=t.getModelViewMatrix();this.modelViewMatrix.assign(i.get()),this.screenMatrix.assign(this.layoutNode.transform(e,t)),i.pushMatrix(this.screenMatrix),t.getLayouts().push(this.layoutNode),Q().prototype.traverse.call(this,e,t),t.getLayouts().pop(),i.pop()}else Q().prototype.traverse.call(this,e,t);this.viewportNode&&this.viewportNode.pop()}}}),Object.defineProperties(ee,{typeName:{value:"LayoutGroup",enumerable:!0},componentName:{value:"Layout",enumerable:!0},containerField:{value:"children",enumerable:!0},specificationRange:{value:Object.freeze(["3.2","Infinity"]),enumerable:!0},fieldDefinitions:{value:new(b())([new(m())(v().inputOutput,"metadata",new(x().SFNode)),new(m())(v().inputOutput,"layout",new(x().SFNode)),new(m())(v().inputOutput,"viewport",new(x().SFNode)),new(m())(v().inputOutput,"visible",new(x().SFBool)(!0)),new(m())(v().inputOutput,"bboxDisplay",new(x().SFBool)),new(m())(v().initializeOnly,"bboxSize",new(x().SFVec3f)(-1,-1,-1)),new(m())(v().initializeOnly,"bboxCenter",new(x().SFVec3f)),new(m())(v().inputOnly,"addChildren",new(x().MFNode)),new(m())(v().inputOnly,"removeChildren",new(x().MFNode)),new(m())(v().inputOutput,"children",new(x().MFNode))]),enumerable:!0}});const te=ee;d().set("x_ite/Components/Layout/LayoutGroup",te);const ie=te,ne=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Layering/X3DLayerNode");var se=i.n(ne);const oe=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Navigation/OrthoViewpoint");var re=i.n(oe);function ae(e){se().call(this,e,new(re())(e),new ie(e)),this.addType(v().LayoutLayer)}Object.assign(Object.setPrototypeOf(ae.prototype,se().prototype),{initialize(){se().prototype.initialize.call(this),this._layout.addFieldInterest(this.getGroup()._layout),this._addChildren.addFieldInterest(this.getGroup()._addChildren),this._removeChildren.addFieldInterest(this.getGroup()._removeChildren),this._children.addFieldInterest(this.getGroup()._children),this.getGroup()._layout=this._layout,this.getGroup()._children=this._children,this.getGroup().setPrivate(!0),this.getGroup().setup()}}),Object.defineProperties(ae,{typeName:{value:"LayoutLayer",enumerable:!0},componentName:{value:"Layout",enumerable:!0},containerField:{value:"layers",enumerable:!0},specificationRange:{value:Object.freeze(["3.2","Infinity"]),enumerable:!0},fieldDefinitions:{value:new(b())([new(m())(v().inputOutput,"metadata",new(x().SFNode)),new(m())(v().inputOutput,"pickable",new(x().SFBool)(!0)),new(m())(v().inputOutput,"objectType",new(x().MFString)("ALL")),new(m())(v().inputOutput,"visible",new(x().SFBool)(!0)),new(m())(v().inputOutput,"layout",new(x().SFNode)),new(m())(v().inputOutput,"viewport",new(x().SFNode)),new(m())(v().inputOnly,"addChildren",new(x().MFNode)),new(m())(v().inputOnly,"removeChildren",new(x().MFNode)),new(m())(v().inputOutput,"children",new(x().MFNode))]),enumerable:!0}});const le=ae;d().set("x_ite/Components/Layout/LayoutLayer",le);const he=le,ue=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Text/X3DFontStyleNode");var ce=i.n(ue);const de=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Browser/Text/X3DTextGeometry");var pe=i.n(de);const ye=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Browser/Text/TextAlignment");var fe=i.n(ye);const ge=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Texturing/PixelTexture");var we=i.n(ge);const xe=window[Symbol.for("X_ITE.X3D-8.7.8")].require("x_ite/Components/Rendering/X3DGeometryNode");var _e=i.n(xe);const me=window[Symbol.for("X_ITE.X3D-8.7.8")].require("standard/Math/Geometry/Box3");var Se=i.n(me);const be=window[Symbol.for("X_ITE.X3D-8.7.8")].require("standard/Math/Algorithm");var Xe=i.n(be),Me=i(355);function Oe(e,t){pe().call(this,e,t),e.setTransparent(!0),this.texCoordArray=_e().createArray(),this.textureNode=new(we())(e.getExecutionContext()),this.canvas=Me("<canvas></canvas>"),this.context=this.canvas[0].getContext("2d",{willReadFrequently:!0}),this.matrix=new(l()),this.textureNode._textureProperties=t.getBrowser().getScreenTextureProperties(),this.textureNode.setup()}Object.assign(Object.setPrototypeOf(Oe.prototype,pe().prototype),{modelViewMatrix:new(l()),isTransparent:()=>!0,getMatrix(){return this.matrix},update:function(){const e=new(r())(0,0,0),t=new(r())(1,1,0);return function(){pe().prototype.update.call(this);const i=this.getFontStyle(),n=this.getText();switch(n._textBounds.x=Math.ceil(n._textBounds.x)+1,n._textBounds.y=Math.ceil(n._textBounds.y)+1,this.getBBox().getExtents(e,t),e.x-=1,e.y-=1,i.getMajorAlignment()){case fe().BEGIN:case fe().FIRST:e.x=Math.floor(e.x),t.x=e.x+n._textBounds.x;break;case fe().MIDDLE:e.x=Math.round(e.x),t.x=e.x+n._textBounds.x;break;case fe().END:t.x=Math.ceil(t.x),e.x=t.x-n._textBounds.x}switch(i.getMinorAlignment()){case fe().BEGIN:case fe().FIRST:t.y=Math.ceil(t.y),e.y=t.y-n._textBounds.y;break;case fe().MIDDLE:t.y=Math.round(t.y),e.y=t.y-n._textBounds.y;break;case fe().END:e.y=Math.floor(e.y),t.y=e.y+n._textBounds.y}n._origin.x=e.x,n._origin.y=t.y,this.getBBox().setExtents(e,t)}}(),build:function(){const e=new(r())(0,0,0),t=new(r())(1,1,0);return function(){const i=this.getFontStyle(),n=i.getFont();if(!n)return;const s=this.getText(),o=this.getGlyphs(),r=this.getMinorAlignment(),a=this.getTranslations(),l=this.getCharSpacings(),h=i.getScale(),u=h/n.unitsPerEm,c=this.texCoordArray,d=s.getNormals(),p=s.getVertices(),y=this.canvas[0],f=this.context;c.length=0,s.getMultiTexCoords().push(c),this.getBBox().getExtents(e,t),d.push(0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1),p.push(e.x,e.y,0,1,t.x,e.y,0,1,t.x,t.y,0,1,e.x,e.y,0,1,t.x,t.y,0,1,e.x,t.y,0,1);const g=s._textBounds.x,w=s._textBounds.y;y.width=Xe().nextPowerOfTwo(g),y.height=Xe().nextPowerOfTwo(w);const x=g/y.width,_=1-w/y.height;if(c.push(0,_,0,1,x,_,0,1,x,1,0,1,0,_,0,1,x,1,0,1,0,1,0,1),f.fillStyle="rgba(255,255,255,0)",f.fillRect(0,0,y.width,y.height),f.fillStyle="rgba(255,255,255,1)",f.save(),f.translate(0,y.height),f.scale(1,-1),i._horizontal.getValue())for(let i=0,s=o.length;i<s;++i){const s=o[i],c=l[i],d=a[i];let p=0;for(let i=0,o=s.length;i<o;++i){const o=s[i],a=r.x+d.x+p+i*c-e.x,l=r.y+d.y-t.y;this.drawGlyph(f,n,o,a,l,h);let y=0;i+1<s.length&&(y=n.getKerningValue(o,s[i+1])),p+=(o.advanceWidth+y)*u}}else{const l=i._leftToRight.getValue(),u=i._topToBottom.getValue(),c=l?0:s._string.length-1,d=l?s._string.length:-1,p=l?1:-1;for(let i=c,s=0;i!==d;i+=p){const l=o[i],c=l.length,d=u?c:-1,p=u?1:-1;for(let i=u?0:c-1;i!==d;i+=p,++s){const o=a[s],u=r.x+o.x-e.x,c=r.y+o.y-t.y;this.drawGlyph(f,n,l[i],u,c,h)}}}f.restore();const m=f.getImageData(0,0,y.width,y.height);m?this.textureNode.setTexture(y.width,y.height,!0,new Uint8Array(m.data.buffer),!1):this.textureNode.clear()}}(),drawGlyph(e,t,i,n,s,o){const r=i.getPath(n,-s,o),a=r.commands;e.beginPath();for(let t=0,i=a.length;t<i;++t){const i=a[t];switch(i.type){case"M":e.moveTo(i.x,i.y);continue;case"Z":e.closePath();continue;case"L":e.lineTo(i.x,i.y);continue;case"Q":e.quadraticCurveTo(i.x1,i.y1,i.x,i.y);continue;case"C":e.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y);continue}}r.fill&&e.fill(),r.stroke&&(e.lineWidth=r.strokeWidth,e.stroke())},getGlyphExtents(e,t,i,n,s){const o=e.unitsPerEm;n.set((t.xMin||0)/o,(t.yMin||0)/o,0),s.set((t.xMax||0)/o,(t.yMax||0)/o,0)},traverse:function(){const e=new(Se());return function(t,i){this.getBrowser().getScreenScaleMatrix(i,this.matrix),e.assign(this.getBBox()).multRight(this.matrix),this.getText().setBBox(e)}}(),display(e,t){l().prototype.multLeft.call(t.modelViewMatrix,this.matrix),t.textureNode=this.textureNode},transformLine:function(){const e=new(l());return function(t){return t.multLineMatrix(e.assign(this.matrix).inverse())}}(),transformMatrix(e){return e.multLeft(this.matrix)}});const ve=Oe;d().set("x_ite/Browser/Layout/ScreenText",ve);const ze=ve;function Te(e){ce().call(this,e),this.addType(v().ScreenFontStyle)}Object.assign(Object.setPrototypeOf(Te.prototype,ce().prototype),{initialize(){ce().prototype.initialize.call(this),this.getBrowser().getRenderingProperties()._ContentScale.addInterest("addNodeEvent",this)},getTextGeometry(e){return new ze(e,this)},getScale(){return this._pointSize.getValue()*this.getBrowser().getPixelPerPoint()}}),Object.defineProperties(Te,{typeName:{value:"ScreenFontStyle",enumerable:!0},componentName:{value:"Layout",enumerable:!0},containerField:{value:"fontStyle",enumerable:!0},specificationRange:{value:Object.freeze(["3.2","Infinity"]),enumerable:!0},fieldDefinitions:{value:new(b())([new(m())(v().inputOutput,"metadata",new(x().SFNode)),new(m())(v().inputOutput,"language",new(x().SFString)),new(m())(v().inputOutput,"family",new(x().MFString)("SERIF")),new(m())(v().inputOutput,"style",new(x().SFString)("PLAIN")),new(m())(v().inputOutput,"pointSize",new(x().SFFloat)(12)),new(m())(v().inputOutput,"spacing",new(x().SFFloat)(1)),new(m())(v().inputOutput,"horizontal",new(x().SFBool)(!0)),new(m())(v().inputOutput,"leftToRight",new(x().SFBool)(!0)),new(m())(v().inputOutput,"topToBottom",new(x().SFBool)(!0)),new(m())(v().inputOutput,"justify",new(x().MFString)("BEGIN"))]),enumerable:!0}});const Ne=Te;d().set("x_ite/Components/Layout/ScreenFontStyle",Ne);const Fe=Ne;function Ie(e){Q().call(this,e),this.addType(v().ScreenGroup),this.matrix=new(l())}Object.assign(Object.setPrototypeOf(Ie.prototype,Q().prototype),{getBBox(e,t){return this.getSubBBox(e,t).multRight(this.matrix)},getMatrix(){return this.matrix},traverse(e,t){switch(e){case $().CAMERA:case $().PICKING:case $().SHADOW:break;default:this.getBrowser().getScreenScaleMatrix(t,this.matrix)}const i=t.getModelViewMatrix();i.push(),i.multLeft(this.matrix),Q().prototype.traverse.call(this,e,t),i.pop()}}),Object.defineProperties(Ie,{typeName:{value:"ScreenGroup",enumerable:!0},componentName:{value:"Layout",enumerable:!0},containerField:{value:"children",enumerable:!0},specificationRange:{value:Object.freeze(["3.2","Infinity"]),enumerable:!0},fieldDefinitions:{value:new(b())([new(m())(v().inputOutput,"metadata",new(x().SFNode)),new(m())(v().inputOutput,"visible",new(x().SFBool)(!0)),new(m())(v().inputOutput,"bboxDisplay",new(x().SFBool)),new(m())(v().initializeOnly,"bboxSize",new(x().SFVec3f)(-1,-1,-1)),new(m())(v().initializeOnly,"bboxCenter",new(x().SFVec3f)),new(m())(v().inputOnly,"addChildren",new(x().MFNode)),new(m())(v().inputOnly,"removeChildren",new(x().MFNode)),new(m())(v().inputOutput,"children",new(x().MFNode))]),enumerable:!0}});const Ee=Ie;d().set("x_ite/Components/Layout/ScreenGroup",Ee);const Le=Ee;t().add({name:"Layout",concreteNodes:[K,ie,he,Fe,Le],abstractNodes:[N],browserContext:g});const Ue=void 0;d().set("assets/components/Layout",Ue)})()})();
>>>>>>> development
