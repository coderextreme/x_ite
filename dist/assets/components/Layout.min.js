/* X_ITE v8.2.0 */(()=>{"use strict";var t={355:t=>{t.exports=window[Symbol.for("X_ITE.X3D-8.2.0")].require("lib/jquery")}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const t=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components");var e=i.n(t);const n=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Texturing/TextureProperties");var s=i.n(n);const o=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Numbers/Vector3");var r=i.n(o);const a=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Numbers/Matrix4");var h=i.n(a);const u=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Geometry/ViewVolume");var l=i.n(u);const c=Symbol();function g(){}g.prototype={getScreenTextureProperties:function(){return this[c]=new(s())(this.getPrivateScene()),this[c]._boundaryModeS="CLAMP_TO_EDGE",this[c]._boundaryModeT="CLAMP_TO_EDGE",this[c]._boundaryModeR="CLAMP_TO_EDGE",this[c]._minificationFilter="NEAREST_PIXEL",this[c]._magnificationFilter="NEAREST_PIXEL",this[c]._generateMipMaps=!1,this[c]._textureCompression="DEFAULT",this[c].setup(),this.getScreenTextureProperties=function(){return this[c]},Object.defineProperty(this,"getScreenTextureProperties",{enumerable:!1}),this[c]},getScreenScaleMatrix:function(){const t=new(r())(0,0,0),e=new(r())(0,0,0),i=new(h());return function(n,s){const o=n.getModelViewMatrix().get(),a=n.getProjectionMatrix().get(),h=n.getViewVolume().getViewport();n.getViewpoint().getScreenScale(o.origin,h,t);const u=o.xAxis.normalize().multiply(t.x),c=o.yAxis.normalize().multiply(t.y),g=o.zAxis.normalize().multiply(t.x);i.set(u.x,u.y,u.z,0,c.x,c.y,c.z,0,g.x,g.y,g.z,0,o[12],o[13],o[14],1),l().projectPoint(r().Zero,i,a,h,e),e.x=Math.round(e.x),e.y=Math.round(e.y),l().unProjectPoint(e.x,e.y,e.z,i,a,h,e),e.z=0,i.translate(e),s.assign(o).inverse().multLeft(i)}}()};const f=g,d=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Fields");var y=i.n(d);const p=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Base/X3DFieldDefinition");var x=i.n(p);const w=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Base/FieldDefinitionArray");var _=i.n(w);const m=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Core/X3DChildNode");var S=i.n(m);const b=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Base/X3DConstants");var M=i.n(b);function E(t){S().call(this,t),this.addType(M().X3DLayoutNode)}E.prototype=Object.assign(Object.create(S().prototype),{constructor:E});const I=E,T=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Base/X3DCast");var X=i.n(T);const N=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Numbers/Vector2");var F=i.n(N);const D=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Numbers/Rotation4");var v=i.n(D),z=0,B=z++,O=z++,L=z++,U=z++,A=z++,C=z++,R=z++,Y=z++,V=z++,P=z++;function G(t){I.call(this,t),this.addType(M().Layout),this.alignX=O,this.alignY=O,this.offsetUnitX=C,this.offsetUnitY=C,this.offsetX=0,this.offsetY=0,this.sizeUnitX=C,this.sizeUnitY=C,this.sizeX=1,this.sizeY=1,this.scaleModeX=V,this.scaleModeY=V,this.parent=null,this.rectangleCenter=new(F())(0,0),this.rectangleSize=new(F())(0,0),this.matrix=new(h())}G.prototype=Object.assign(Object.create(I.prototype),{constructor:G,viewportPixel:new(F())(0,0),pixelSize:new(F())(0,0),translation:new(r())(0,0,0),offset:new(r())(0,0,0),scale:new(r())(1,1,1),currentTranslation:new(r())(0,0,0),currentRotation:new(v())(0,0,1,0),currentScale:new(r())(0,0,0),modelViewMatrix:new(h()),[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(_())([new(x())(M().inputOutput,"metadata",new(y().SFNode)),new(x())(M().inputOutput,"align",new(y().MFString)("CENTER","CENTER")),new(x())(M().inputOutput,"offsetUnits",new(y().MFString)("WORLD","WORLD")),new(x())(M().inputOutput,"offset",new(y().MFFloat)(0,0)),new(x())(M().inputOutput,"sizeUnits",new(y().MFString)("WORLD","WORLD")),new(x())(M().inputOutput,"size",new(y().MFFloat)(1,1)),new(x())(M().inputOutput,"scaleMode",new(y().MFString)("NONE","NONE"))]),getTypeName:function(){return"Layout"},getComponentName:function(){return"Layout"},getContainerField:function(){return"layout"},initialize:function(){I.prototype.initialize.call(this),this._align.addInterest("set_align__",this),this._offsetUnits.addInterest("set_offsetUnits__",this),this._offset.addInterest("set_offset__",this),this._sizeUnits.addInterest("set_sizeUnits__",this),this._size.addInterest("set_size__",this),this._scaleMode.addInterest("set_scaleMode__",this),this.set_align__(),this.set_offsetUnits__(),this.set_offset__(),this.set_sizeUnits__(),this.set_size__(),this.set_scaleMode__()},set_align__:function(){this._align.length>0?"LEFT"===this._align[0]?this.alignX=B:"RIGHT"===this._align[0]?this.alignX=L:this.alignX=O:this.alignX=O,this._align.length>1?"BOTTOM"===this._align[1]?this.alignY=U:"TOP"===this._align[1]?this.alignY=A:this.alignY=O:this.alignY=O},set_offsetUnits__:function(){this._offsetUnits.length>0?("FRACTION"===this._offsetUnits[0]?this.offsetUnitX=R:"PIXEL"===this._offsetUnits[0]?this.offsetUnitX=Y:this.offsetUnitX=C,this._offsetUnits.length>1?"FRACTION"===this._offsetUnits[1]?this.offsetUnitY=R:"PIXEL"===this._offsetUnits[1]?this.offsetUnitY=Y:this.offsetUnitY=C:this.offsetUnitY=this.offsetUnitX):(this.offsetUnitX=C,this.offsetUnitY=C)},set_offset__:function(){this._offset.length>0?(this.offsetX=this._offset[0],this._offset.length>1?this.offsetY=this._offset[1]:this.offsetY=offsetX):(this.offsetX=0,this.offsetY=0)},set_sizeUnits__:function(){this._sizeUnits.length>0?("FRACTION"===this._sizeUnits[0]?this.sizeUnitX=R:"PIXEL"===this._sizeUnits[0]?this.sizeUnitX=Y:this.sizeUnitX=C,this._sizeUnits.length>1?"FRACTION"===this._sizeUnits[1]?this.sizeUnitY=R:"PIXEL"===this._sizeUnits[1]?this.sizeUnitY=Y:this.sizeUnitY=C:this.sizeUnitY=this.sizeUnitX):(this.sizeUnitX=C,this.sizeUnitY=C)},set_size__:function(){this._size.length>0?(this.sizeX=this._size[0],this._size.length>1?this.sizeY=this._size[1]:this.sizeY=this.sizeX):(this.sizeX=0,this.sizeY=0)},set_scaleMode__:function(){this._scaleMode.length>0?("FRACTION"===this._scaleMode[0]?this.scaleModeX=R:"PIXEL"===this._scaleMode[0]?this.scaleModeX=Y:"STRETCH"===this._scaleMode[0]?this.scaleModeX=P:this.scaleModeX=V,this._scaleMode.length>1?"FRACTION"===this._scaleMode[1]?this.scaleModeY=R:"PIXEL"===this._scaleMode[1]?this.scaleModeY=Y:"STRETCH"===this._scaleMode[1]?this.scaleModeY=P:this.scaleModeY=V:this.scaleModeY=this.scaleModeX):(this.scaleModeX=V,this.scaleModeY=V)},getRectangleCenter:function(){return this.rectangleCenter},getRectangleSize:function(){return this.rectangleSize},getAlignX:function(){return this.alignX},getAlignY:function(){return this.alignY},getOffsetUnitX:function(){return this.offsetUnitX===C?this.parent?this.parent.getOffsetUnitX():R:this.offsetUnitX},getOffsetUnitY:function(){return this.offsetUnitY===C?this.parent?this.parent.getOffsetUnitY():R:this.offsetUnitY},getOffsetX:function(){return this.offsetX},getOffsetY:function(){return this.offsetY},getSizeUnitX:function(){return this.sizeUnitX===C?this.parent?this.parent.getSizeUnitX():R:this.sizeUnitX},getSizeUnitY:function(){return this.sizeUnitY===C?this.parent?this.parent.getSizeUnitY():R:this.sizeUnitY},getSizeX:function(){return this.sizeX},getSizeY:function(){return this.sizeY},getScaleModeX:function(){return this.parent?this.scaleModeX:this.scaleModeX===V?R:this.scaleModeX},getScaleModeY:function(){return this.parent?this.scaleModeY:this.scaleModeY===V?R:this.scaleModeY},transform:function(t,e){var i=this.parent=e.getParentLayout(),n=this.matrix,s=e.getViewpoint(),o=e.getNavigationInfo().getNearValue(),r=e.getViewVolume().getScissor(),a=s.getViewportSize(r,o),h=this.viewportPixel,u=this.pixelSize,l=i?i.getRectangleSize():a,c=this.rectangleSize,g=this.rectangleCenter;switch(h.set(r[2],r[3]),u.assign(a).divVec(h),this.getSizeUnitX()){case R:c.x=this.sizeX*l.x;break;case Y:c.x=this.sizeX*u.x}switch(this.getSizeUnitY()){case R:c.y=this.sizeY*l.y;break;case Y:c.y=this.sizeY*u.y}var f=this.translation.set(0,0,0);switch(this.getAlignX()){case B:f.x=-(l.x-c.x)/2;break;case O:this.getSizeUnitX()===Y&&1&h.x&&(f.x=-u.x/2);break;case L:f.x=(l.x-c.x)/2}switch(this.getAlignY()){case U:f.y=-(l.y-c.y)/2;break;case O:this.getSizeUnitX===Y&&1&h.y&&(f.y=-u.y/2);break;case A:f.y=(l.y-c.y)/2}var d=this.offset.set(0,0,0);switch(this.getOffsetUnitX()){case R:d.x=this.offsetX*l.x;break;case Y:d.x=this.offsetX*a.x/h.x}switch(this.getOffsetUnitY()){case R:d.y=this.offsetY*l.y;break;case Y:d.y=this.offsetY*a.y/h.y}var y=this.scale.set(1,1,1),p=this.currentTranslation,x=this.currentRotation,w=this.currentScale;switch(e.getModelViewMatrix().get().get(p,x,w),this.getScaleModeX()){case V:y.x=w.x;break;case R:y.x=c.x;break;case P:break;case Y:y.x=a.x/h.x}switch(this.getScaleModeY()){case V:y.y=w.y;break;case R:y.y=c.y;break;case P:break;case Y:y.y=a.y/h.y}return this.getScaleModeX()===P?this.getScaleModeY()===P?c.x>c.y?(y.x=c.x,y.y=y.x):(y.y=c.y,y.x=y.y):y.x=y.y:this.getScaleModeY()===P&&(y.y=y.x),g.assign(f).add(d),n.set(p,x),n.translate(f.add(d)),n.scale(y),n}});const j=G,k=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Grouping/X3DGroupingNode");var q=i.n(k);const W=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Rendering/TraverseType");var H=i.n(W);function K(t){q().call(this,t),this.addType(M().LayoutGroup),this.viewportNode=null,this.layoutNode=null,this.modelViewMatrix=new(h()),this.screenMatrix=new(h())}K.prototype=Object.assign(Object.create(q().prototype),{constructor:K,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(_())([new(x())(M().inputOutput,"metadata",new(y().SFNode)),new(x())(M().inputOutput,"layout",new(y().SFNode)),new(x())(M().inputOutput,"viewport",new(y().SFNode)),new(x())(M().inputOutput,"visible",new(y().SFBool)(!0)),new(x())(M().inputOutput,"bboxDisplay",new(y().SFBool)),new(x())(M().initializeOnly,"bboxSize",new(y().SFVec3f)(-1,-1,-1)),new(x())(M().initializeOnly,"bboxCenter",new(y().SFVec3f)),new(x())(M().inputOnly,"addChildren",new(y().MFNode)),new(x())(M().inputOnly,"removeChildren",new(y().MFNode)),new(x())(M().inputOutput,"children",new(y().MFNode))]),getTypeName:function(){return"LayoutGroup"},getComponentName:function(){return"Layout"},getContainerField:function(){return"children"},initialize:function(){q().prototype.initialize.call(this),this._viewport.addInterest("set_viewport__",this),this._layout.addInterest("set_layout__",this),this.set_viewport__(),this.set_layout__()},set_viewport__:function(){this.viewportNode=X()(M().X3DViewportNode,this._viewport)},set_layout__:function(){this.layoutNode=X()(M().X3DLayoutNode,this._layout)},getBBox:function(t,e){return q().prototype.getBBox.call(this,t,e).multRight(this.getMatrix())},getMatrix:function(){return this.layoutNode?this.matrix.assign(this.modelViewMatrix).inverse().multLeft(this.screenMatrix):this.matrix.identity(),this.matrix},traverse:function(t,e){if(t!==H().COLLISION){if(this.viewportNode&&this.viewportNode.push(),this.layoutNode){var i=e.getModelViewMatrix();this.modelViewMatrix.assign(i.get()),this.screenMatrix.assign(this.layoutNode.transform(t,e)),i.pushMatrix(this.screenMatrix),e.getLayouts().push(this.layoutNode),q().prototype.traverse.call(this,t,e),e.getLayouts().pop(),i.pop()}else q().prototype.traverse.call(this,t,e);this.viewportNode&&this.viewportNode.pop()}}});const Q=K,Z=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Layering/X3DLayerNode");var J=i.n(Z);const $=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Navigation/OrthoViewpoint");var tt=i.n($);function et(t){J().call(this,t,new(tt())(t),new Q(t)),this.addType(M().LayoutLayer)}et.prototype=Object.assign(Object.create(J().prototype),{constructor:et,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(_())([new(x())(M().inputOutput,"metadata",new(y().SFNode)),new(x())(M().inputOutput,"isPickable",new(y().SFBool)(!0)),new(x())(M().inputOutput,"layout",new(y().SFNode)),new(x())(M().inputOutput,"viewport",new(y().SFNode)),new(x())(M().inputOnly,"addChildren",new(y().MFNode)),new(x())(M().inputOnly,"removeChildren",new(y().MFNode)),new(x())(M().inputOutput,"children",new(y().MFNode))]),getTypeName:function(){return"LayoutLayer"},getComponentName:function(){return"Layout"},getContainerField:function(){return"layers"},initialize:function(){J().prototype.initialize.call(this),this._layout.addFieldInterest(this.getGroup()._layout),this._addChildren.addFieldInterest(this.getGroup()._addChildren),this._removeChildren.addFieldInterest(this.getGroup()._removeChildren),this._children.addFieldInterest(this.getGroup()._children),this.getGroup()._layout=this._layout,this.getGroup()._children=this._children,this.getGroup().setPrivate(!0),this.getGroup().setup()}});const it=et,nt=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Core/X3DNode");var st=i.n(nt);const ot=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Networking/X3DUrlObject");var rt=i.n(ot);let at=0;const ht={BEGIN:++at,FIRST:++at,MIDDLE:++at,END:++at},ut=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/InputOutput/FileLoader");var lt=i.n(ut);const ct=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Browser/Networking/URLs");var gt=i.n(ct);const ft={SERIF:{PLAIN:gt().getFontsUrl("DroidSerif-Regular.ttf"),ITALIC:gt().getFontsUrl("DroidSerif-Italic.ttf"),BOLD:gt().getFontsUrl("DroidSerif-Bold.ttf"),BOLDITALIC:gt().getFontsUrl("DroidSerif-BoldItalic.ttf")},SANS:{PLAIN:gt().getFontsUrl("Ubuntu-R.ttf"),ITALIC:gt().getFontsUrl("Ubuntu-RI.ttf"),BOLD:gt().getFontsUrl("Ubuntu-B.ttf"),BOLDITALIC:gt().getFontsUrl("Ubuntu-BI.ttf")},TYPEWRITER:{PLAIN:gt().getFontsUrl("UbuntuMono-R.ttf"),ITALIC:gt().getFontsUrl("UbuntuMono-RI.ttf"),BOLD:gt().getFontsUrl("UbuntuMono-B.ttf"),BOLDITALIC:gt().getFontsUrl("UbuntuMono-BI.ttf")}};function dt(t){st().call(this,t),rt().call(this,t),this.addType(M().X3DFontStyleNode),this.addChildObjects("load",new(y().SFBool)(!0),"autoRefresh",new(y().SFTime),"autoRefreshTimeLimit",new(y().SFTime)(3600)),this.addAlias("url",this._family),this.familyStack=[],this.alignments=[],this.loader=new(lt())(this)}dt.prototype=Object.assign(Object.create(st().prototype),rt().prototype,{constructor:dt,initialize:function(){st().prototype.initialize.call(this),rt().prototype.initialize.call(this),this._style.addInterest("set_style__",this),this._justify.addInterest("set_justify__",this),this.font=null,this.familyIndex=0,this.set_justify__(),this.set_style__(),this.requestImmediateLoad()},set_style__:function(){this._load.getValue()&&(this.setLoadState(M().NOT_STARTED_STATE),this.requestImmediateLoad())},set_justify__:function(){const t=this._horizontal.getValue()?this._leftToRight.getValue():this._topToBottom.getValue();this.alignments[0]=this._justify.length>0?this.getAlignment(0,t):t?ht.BEGIN:ht.END;const e=this._horizontal.getValue()?this._topToBottom.getValue():this._leftToRight.getValue();this.alignments[1]=this._justify.length>1?this.getAlignment(1,e):e?ht.FIRST:ht.END},getMajorAlignment:function(){return this.alignments[0]},getMinorAlignment:function(){return this.alignments[1]},getAlignment:function(t,e){if(e)switch(this._justify[t]){case"FIRST":return ht.FIRST;case"BEGIN":return ht.BEGIN;case"MIDDLE":return ht.MIDDLE;case"END":return ht.END}else switch(this._justify[t]){case"FIRST":case"BEGIN":return ht.END;case"MIDDLE":return ht.MIDDLE;case"END":return ht.BEGIN}return t?ht.FIRST:ht.BEGIN},getDefaultFont:function(t){const e=ft[t];if(e)return e[this._style.getValue()]||e.PLAIN},loadNow:function(){const t=this._url.copy();t.push("SERIF"),this.familyStack.length=0;for(const e of t)this.familyStack.push(this.getDefaultFont(e)||e);this.loadNext()},loadNext:function(){try{if(0===this.familyStack.length)return this.setLoadState(M().FAILED_STATE),void(this.font=null);this.family=this.familyStack.shift(),this.URL=new URL(this.family,this.loader.getReferer()),"data:"!==this.URL.protocol&&(this.getBrowser().getBrowserOptions().getCache()&&this.getCache()||this.URL.searchParams.set("_",Date.now())),this.getBrowser().getFont(this.URL).done(this.setFont.bind(this)).fail(this.setError.bind(this))}catch(t){this.setError(t.message)}},setError:function(t){"data:"!==this.URL.protocol&&console.warn("Error loading font '"+decodeURI(this.URL.href)+"':",t),this.loadNext()},setFont:function(t){this.font=t,this.setLoadState(M().COMPLETE_STATE),this.addNodeEvent()},getFont:function(){return this.font},dispose:function(){rt().prototype.dispose.call(this),st().prototype.dispose.call(this)}});const yt=dt,pt=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Numbers/Matrix3");var xt=i.n(pt);function wt(t,e){switch(arguments.length){case 0:return void(this.matrix=new(xt())(0,0,0,0,0,0,0,0,0));case 2:return void(this.matrix=new(xt())(t.x/2,0,0,0,t.y/2,0,e.x,e.y,1));case 3:{const t=arguments[0],e=arguments[1],i=(e.x-t.x)/2,n=(e.y-t.y)/2,s=(e.x+t.x)/2,o=(e.y+t.y)/2;return void(this.matrix=new(xt())(i,0,0,0,n,0,s,o,1))}}}wt.prototype={constructor:wt,copy:function(){const t=Object.create(wt.prototype);return t.matrix=this.matrix.copy(),t},assign:function(t){return this.matrix.assign(t.matrix),this},equals:function(t){return this.matrix.equals(t.matrix)},set:function(t,e){const i=this.matrix;switch(arguments.length){case 0:return i[0]=.5,i[1]=0,i[2]=0,i[3]=0,i[4]=.5,i[5]=0,i[6]=0,i[7]=0,i[8]=0,this;case 2:return i[0]=t.x/2,i[1]=0,i[2]=0,i[3]=0,i[4]=t.y/2,i[5]=0,i[6]=e.x,i[7]=e.y,i[8]=1,this;case 3:{const t=arguments[0],e=arguments[1],i=(e.x-t.x)/2,n=(e.y-t.y)/2,s=(e.x+t.x)/2,o=(e.y+t.y)/2;return this.matrix.set(i,0,0,0,n,0,s,o,1),this}}},setExtents:function(t,e){const i=this.matrix,n=(e.x-t.x)/2,s=(e.y-t.y)/2,o=(e.x+t.x)/2,r=(e.y+t.y)/2;return i[0]=n,i[1]=0,i[2]=0,i[3]=0,i[4]=s,i[5]=0,i[6]=o,i[7]=r,i[8]=1,this},isEmpty:function(){return 0===this.matrix[8]},add:function(){const t=new(F())(0,0),e=new(F())(0,0),i=new(F())(0,0),n=new(F())(0,0);return function(s){return this.isEmpty()?this.assign(s):s.isEmpty()?this:(this.getExtents(t,e),s.getExtents(i,n),this.set(t.min(i),e.max(n),!0))}}(),multLeft:function(t){return this.matrix.multLeft(t),this},multRight:function(t){return this.matrix.multRight(t),this},getExtents:function(t,e){this.getAbsoluteExtents(t,e),t.add(this.center),e.add(this.center)},getAbsoluteExtents:function(){const t=new(F())(0,0);return function(e,i){const n=this.matrix,s=n.xAxis,o=n.yAxis;t.assign(s).add(o);const r=o.subtract(s);e.assign(t).min(r),i.assign(t).max(r),t.negate(),r.negate(),e.min(t,r),i.max(t,r)}}(),containsPoint:function(){const t=new(F())(0,0),e=new(F())(0,0);return function(i){return this.getExtents(t,e),t.x<=i.x&&e.x>=i.x&&t.y<=i.y&&e.y>=i.y}}(),toString:function(){return this.size+", "+this.center}},Object.defineProperty(wt.prototype,"size",{get:function(){const t=new(F())(0,0),e=new(F())(0,0);return function(){return this.getAbsoluteExtents(t,e),e.subtract(t)}}(),enumerable:!0,configurable:!1}),Object.defineProperty(wt.prototype,"center",{get:function(){return this.matrix.origin},enumerable:!0,configurable:!1});const _t=wt,mt=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Geometry/Box3");var St=i.n(mt),bt=new _t,Mt=new _t,Et=new(F())(0,0),It=new(F())(0,0),Tt=new(F())(0,0),Xt=new(F())(0,0),Nt=new(r())(0,0,0),Ft=new(r())(0,0,0),Dt=new(F())(0,0),vt=new(F())(0,0),zt=new(F())(0,0),Bt=new(F())(0,0),Ot=new(F())(0,0),Lt=new(r())(0,0,0),Ut=new(F())(0,0),At=new _t,Ct=new(F())(0,0),Rt=new(r())(0,0,0);function Yt(t,e){this.browser=t.getBrowser(),this.text=t,this.fontStyle=e,this.glyphs=[],this.minorAlignment=new(F())(0,0),this.translations=[],this.charSpacings=[],this.bearing=new(F())(0,0),this.yPad=[],this.bbox=new(St())}Yt.prototype={constructor:Yt,getBrowser:function(){return this.browser},getText:function(){return this.text},getFontStyle:function(){return this.fontStyle},getGlyphs:function(){return this.glyphs},getMinorAlignment:function(){return this.minorAlignment},getTranslations:function(){return this.translations},getCharSpacings:function(){return this.charSpacings},getBearing:function(){return this.bearing},getBBox:function(){return this.bbox},update:function(){var t=this.text,e=this.fontStyle,i=t._string.length;if(t._lineBounds.length=i,this.glyphs.length=0,0===i||!e.getFont())return t._origin.setValue(Rt),t._textBounds.setValue(Ct),void this.bbox.set();if(e._horizontal.getValue())this.resizeArray(this.translations,i),this.resizeArray(this.charSpacings,i),this.horizontal(t,e);else{for(var n=t._string,s=0,o=0,r=n.length;o<r;++o)s+=n[o].length;this.resizeArray(this.translations,s),this.resizeArray(this.charSpacings,s),this.vertical(t,e)}},resizeArray:function(t,e){for(var i=t.length;i<e;++i)t.push(new(F())(0,0));t.length=e},horizontal:function(t,e){var i=e.getFont(),n=t._string,s=n.length,o=Math.max(0,t._maxExtent.getValue()),r=e._topToBottom.getValue(),a=e.getScale(),h=e._spacing.getValue();bt.set();for(var u=r?s:-1,l=r?1:-1,c=r?0:s-1,g=0;c!==u;c+=l,++g){var f=n[c],d=this.getHorizontalLineExtents(e,f,Et,It,g);Dt.assign(It).subtract(Et);var y=0,p=t.getLength(c);switch(Ot.set(Dt.x*a,0==g?It.y-i.descender/i.unitsPerEm*a:h),o&&(p=p?Math.min(o,p):Math.min(o,Dt.x*a)),p&&(y=(p-Ot.x)/(d.length-1),Ot.x=p,Dt.x=p/a),this.charSpacings[g]=y,t._lineBounds[c]=Ot,e.getMajorAlignment()){case ht.BEGIN:case ht.FIRST:this.translations[g].set(0,-g*h);break;case ht.MIDDLE:this.translations[g].set(-Et.x-Dt.x/2,-g*h);break;case ht.END:this.translations[g].set(-Et.x-Dt.x,-g*h)}this.translations[g].multiply(a),vt.assign(Et).add(zt.assign(Dt).divide(2)),bt.add(At.set(Dt.multiply(a),vt.multiply(a).add(this.translations[g])))}switch(bt.getExtents(Et,It),Dt.assign(It).subtract(Et),t._textBounds=Dt,this.bearing.set(0,-It.y),e.getMinorAlignment()){case ht.BEGIN:this.minorAlignment.assign(this.bearing);break;case ht.FIRST:this.minorAlignment.set(0,0);break;case ht.MIDDLE:this.minorAlignment.set(0,Dt.y/2-It.y);break;case ht.END:this.minorAlignment.set(0,(s-1)*h*a)}Et.add(this.minorAlignment),It.add(this.minorAlignment),t._origin.setValue(Lt.set(Et.x,It.y,0)),this.bbox.setExtents(Nt.set(Et.x,Et.y,0),Ft.set(It.x,It.y,0))},vertical:function(t,e){var i=e.getFont(),n=t._string,s=n.length,o=Math.max(0,t._maxExtent.getValue()),r=e._leftToRight.getValue(),a=e._topToBottom.getValue(),h=e.getScale(),u=e._spacing.getValue(),l=this.yPad,c=this.getBrowser().getBrowserOptions().getPrimitiveQuality();bt.set();for(var g=r?s:-1,f=r?1:-1,d=0,y=r?0:s-1;y!==g;y+=f){var p=this.stringToGlyphs(i,n[y],!0,y),x=d,w=p.length;Mt.set();for(var _=a?w:-1,m=a?1:-1,S=a?0:w-1;S!==_;S+=m,++d){var b=p[S];this.getGlyphExtents(i,b,c,Et,It),Dt.assign(It).subtract(Et);var M=a?S:w-S-1;this.translations[d].set((u-Dt.x-Et.x)/2,-M),vt.assign(Et).add(zt.assign(Dt).divide(2)).add(this.translations[d]),Mt.add(At.set(Dt,vt))}Mt.getExtents(Et,It),Dt.assign(It).subtract(Et);var E=r?y:s-y-1,I=(u-Dt.x)/2,T=0,X=t.getLength(y);switch(Ot.set(0===y?u-I:u,w?Dt.y:0).multiply(h),o&&(X=X?Math.min(o,X):Math.min(o,Dt.y*h)),X&&(T=(X-Ot.y)/(p.length-1)/h,Ot.y=X,Dt.y=X/h,Et.y=It.y-Dt.y),t._lineBounds[y]=Ot,e.getMajorAlignment()){case ht.BEGIN:case ht.FIRST:Bt.set(E*u,-1);break;case ht.MIDDLE:Bt.set(E*u,Dt.y/2-It.y);break;case ht.END:w&&this.getGlyphExtents(i,p[a?w-1:0],c,Tt.assign(F().Zero),Ut),Bt.set(E*u,Dt.y-It.y+Tt.y)}for(var N=0,D=x;D<d;++D)this.translations[D].add(Bt),this.translations[D].y-=N,this.translations[D].multiply(h),N+=T;switch(e.getMajorAlignment()){case ht.BEGIN:case ht.FIRST:l[y]=It.y+Bt.y;break;case ht.MIDDLE:l[y]=0;break;case ht.END:l[y]=Et.y+Bt.y}vt.assign(Et).add(zt.assign(Dt).divide(2)),bt.add(At.set(Dt.multiply(h),vt.add(Bt).multiply(h)))}switch(bt.getExtents(Et,It),Dt.assign(It).subtract(Et),e.getMajorAlignment()){case ht.BEGIN:case ht.FIRST:var v=0;for(X=(z=t._lineBounds).length;v<X;++v)z[v].y+=It.y-l[v]*h;break;case ht.MIDDLE:break;case ht.END:var z;for(v=0,X=(z=t._lineBounds).length;v<X;++v)z[v].y+=l[v]*h-Et.y}switch(t._textBounds=Dt,e.getMajorAlignment()){case ht.BEGIN:case ht.FIRST:this.bearing.set(-Et.x,It.y);break;case ht.MIDDLE:this.bearing.set(-Et.x,0);break;case ht.END:this.bearing.set(-Et.x,Et.y)}switch(e.getMinorAlignment()){case ht.BEGIN:case ht.FIRST:this.minorAlignment.set(-Et.x,0);break;case ht.MIDDLE:this.minorAlignment.set(-Et.x-Dt.x/2,0);break;case ht.END:this.minorAlignment.set(-Et.x-Dt.x,0)}Et.add(this.minorAlignment),It.add(this.minorAlignment),t._origin.setValue(Lt.set(Et.x,It.y,0)),this.bbox.set(Nt.set(Et.x,Et.y,0),Ft.set(It.x,It.y,0),!0)},stringToGlyphs:function(t,e,i,n){var s=this.glyphs[n];s||(s=this.glyphs[n]=[]),s.length=e.length;for(var o=i?0:e.length-1,r=i?e.length:-1,a=i?1:-1,h=o,u=0;h!==r;h+=a,++u)s[u]=t.charToGlyph(e[h]);return s},getHorizontalLineExtents:function(t,e,i,n,s){for(var o=t.getFont(),r=t._horizontal.getValue()?t._leftToRight.getValue():t._topToBottom.getValue(),a=this.stringToGlyphs(o,e,r,s),h=this.getBrowser().getBrowserOptions().getPrimitiveQuality(),u=0,l=0,c=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,f=0,d=a.length;f<d;++f){var y=a[f],p=f+1<d?o.getKerningValue(y,a[f+1]):0;this.getGlyphExtents(o,y,h,Tt,Xt),l+=y.advanceWidth+p,c=Math.min(c,Tt.y),g=Math.max(g,Xt.y)}switch(a.length?(this.getGlyphExtents(o,a[0],h,Tt,Xt),u=Tt.x):(c=0,g=0),i.set(u,c),n.set(l/o.unitsPerEm,g),t.getMajorAlignment()){case ht.BEGIN:case ht.FIRST:i.x=0}return a},traverse:function(t,e){}};const Vt=Yt,Pt=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Texturing/PixelTexture");var Gt=i.n(Pt);const jt=window[Symbol.for("X_ITE.X3D-8.2.0")].require("x_ite/Components/Rendering/X3DGeometryNode");var kt=i.n(jt);const qt=window[Symbol.for("X_ITE.X3D-8.2.0")].require("standard/Math/Algorithm");var Wt=i.n(qt),Ht=i(355);function Kt(t,e){Vt.call(this,t,e),t.setTransparent(!0),this.texCoordArray=kt().createArray(),this.textureNode=new(Gt())(t.getExecutionContext()),this.canvas=Ht("<canvas></canvas>"),this.context=this.canvas[0].getContext("2d",{willReadFrequently:!0}),this.matrix=new(h()),this.textureNode._textureProperties=e.getBrowser().getScreenTextureProperties(),this.textureNode.setup()}Kt.prototype=Object.assign(Object.create(Vt.prototype),{constructor:Kt,modelViewMatrix:new(h()),getTransparent:function(){return!0},getMatrix:function(){return this.matrix},update:function(){const t=new(r())(0,0,0),e=new(r())(1,1,0);return function(){Vt.prototype.update.call(this);const i=this.getFontStyle(),n=this.getText();switch(n._textBounds.x=Math.ceil(n._textBounds.x)+1,n._textBounds.y=Math.ceil(n._textBounds.y)+1,this.getBBox().getExtents(t,e),t.x-=1,t.y-=1,i.getMajorAlignment()){case ht.BEGIN:case ht.FIRST:t.x=Math.floor(t.x),e.x=t.x+n._textBounds.x;break;case ht.MIDDLE:t.x=Math.round(t.x),e.x=t.x+n._textBounds.x;break;case ht.END:e.x=Math.ceil(e.x),t.x=e.x-n._textBounds.x}switch(i.getMinorAlignment()){case ht.BEGIN:case ht.FIRST:e.y=Math.ceil(e.y),t.y=e.y-n._textBounds.y;break;case ht.MIDDLE:e.y=Math.round(e.y),t.y=e.y-n._textBounds.y;break;case ht.END:t.y=Math.floor(t.y),e.y=t.y+n._textBounds.y}n._origin.x=t.x,n._origin.y=e.y,this.getBBox().setExtents(t,e)}}(),build:function(){const t=new(r())(0,0,0),e=new(r())(1,1,0);return function(){const i=this.getFontStyle(),n=i.getFont();if(!n)return;const s=this.getText(),o=this.getGlyphs(),r=this.getMinorAlignment(),a=this.getTranslations(),h=this.getCharSpacings(),u=i.getScale(),l=u/n.unitsPerEm,c=this.texCoordArray,g=s.getNormals(),f=s.getVertices(),d=this.canvas[0],y=this.context;c.length=0,s.getMultiTexCoords().push(c),this.getBBox().getExtents(t,e),g.push(0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1),f.push(t.x,t.y,0,1,e.x,t.y,0,1,e.x,e.y,0,1,t.x,t.y,0,1,e.x,e.y,0,1,t.x,e.y,0,1);const p=s._textBounds.x,x=s._textBounds.y;d.width=Wt().nextPowerOfTwo(p),d.height=Wt().nextPowerOfTwo(x);const w=p/d.width,_=1-x/d.height;if(c.push(0,_,0,1,w,_,0,1,w,1,0,1,0,_,0,1,w,1,0,1,0,1,0,1),y.fillStyle="rgba(255,255,255,0)",y.fillRect(0,0,d.width,d.height),y.fillStyle="rgba(255,255,255,1)",y.save(),y.translate(0,d.height),y.scale(1,-1),i._horizontal.getValue())for(let i=0,s=o.length;i<s;++i){const s=o[i],c=h[i],g=a[i];let f=0;for(let i=0,o=s.length;i<o;++i){const o=s[i],a=r.x+g.x+f+i*c-t.x,h=r.y+g.y-e.y;this.drawGlyph(y,n,o,a,h,u);let d=0;i+1<s.length&&(d=n.getKerningValue(o,s[i+1])),f+=(o.advanceWidth+d)*l}}else{const h=i._leftToRight.getValue(),l=i._topToBottom.getValue(),c=h?0:s._string.length-1,g=h?s._string.length:-1,f=h?1:-1;for(let i=c,s=0;i!==g;i+=f){const h=o[i],c=h.length,g=l?c:-1,f=l?1:-1;for(let i=l?0:c-1;i!==g;i+=f,++s){const o=a[s],l=r.x+o.x-t.x,c=r.y+o.y-e.y;this.drawGlyph(y,n,h[i],l,c,u)}}}y.restore();const m=y.getImageData(0,0,d.width,d.height);m?this.textureNode.setTexture(d.width,d.height,!0,new Uint8Array(m.data.buffer),!1):this.textureNode.clear()}}(),drawGlyph:function(t,e,i,n,s,o){const r=i.getPath(n,-s,o),a=r.commands;t.beginPath();for(let e=0,i=a.length;e<i;++e){const i=a[e];switch(i.type){case"M":t.moveTo(i.x,i.y);continue;case"Z":t.closePath();continue;case"L":t.lineTo(i.x,i.y);continue;case"Q":t.quadraticCurveTo(i.x1,i.y1,i.x,i.y);continue;case"C":t.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y);continue}}r.fill&&t.fill(),r.stroke&&(t.lineWidth=r.strokeWidth,t.stroke())},getGlyphExtents:function(t,e,i,n,s){const o=t.unitsPerEm;n.set((e.xMin||0)/o,(e.yMin||0)/o,0),s.set((e.xMax||0)/o,(e.yMax||0)/o,0)},traverse:function(){const t=new(St());return function(e,i){this.getBrowser().getScreenScaleMatrix(i,this.matrix),t.assign(this.getBBox()).multRight(this.matrix),this.getText().setBBox(t)}}(),display:function(t,e){h().prototype.multLeft.call(e.modelViewMatrix,this.matrix),e.textureNode=this.textureNode},transformLine:function(t){return t.multLineMatrix(h().inverse(this.matrix))},transformMatrix:function(t){return t.multLeft(this.matrix)}});const Qt=Kt;function Zt(t){yt.call(this,t),this.addType(M().ScreenFontStyle)}Zt.prototype=Object.assign(Object.create(yt.prototype),{constructor:Zt,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(_())([new(x())(M().inputOutput,"metadata",new(y().SFNode)),new(x())(M().inputOutput,"language",new(y().SFString)),new(x())(M().inputOutput,"family",new(y().MFString)("SERIF")),new(x())(M().inputOutput,"style",new(y().SFString)("PLAIN")),new(x())(M().inputOutput,"pointSize",new(y().SFFloat)(12)),new(x())(M().inputOutput,"spacing",new(y().SFFloat)(1)),new(x())(M().inputOutput,"horizontal",new(y().SFBool)(!0)),new(x())(M().inputOutput,"leftToRight",new(y().SFBool)(!0)),new(x())(M().inputOutput,"topToBottom",new(y().SFBool)(!0)),new(x())(M().inputOutput,"justify",new(y().MFString)("BEGIN"))]),getTypeName:function(){return"ScreenFontStyle"},getComponentName:function(){return"Layout"},getContainerField:function(){return"fontStyle"},getTextGeometry:function(t){return new Qt(t,this)},getScale:function(){return this._pointSize.getValue()*this.getBrowser().getPixelPerPoint()}});const Jt=Zt;function $t(t){q().call(this,t),this.addType(M().ScreenGroup),this.matrix=new(h())}$t.prototype=Object.assign(Object.create(q().prototype),{constructor:$t,[Symbol.for("X_ITE.X3DBaseNode.fieldDefinitions")]:new(_())([new(x())(M().inputOutput,"metadata",new(y().SFNode)),new(x())(M().inputOutput,"visible",new(y().SFBool)(!0)),new(x())(M().inputOutput,"bboxDisplay",new(y().SFBool)),new(x())(M().initializeOnly,"bboxSize",new(y().SFVec3f)(-1,-1,-1)),new(x())(M().initializeOnly,"bboxCenter",new(y().SFVec3f)),new(x())(M().inputOnly,"addChildren",new(y().MFNode)),new(x())(M().inputOnly,"removeChildren",new(y().MFNode)),new(x())(M().inputOutput,"children",new(y().MFNode))]),getTypeName:function(){return"ScreenGroup"},getComponentName:function(){return"Layout"},getContainerField:function(){return"children"},getBBox:function(t,e){return this.getSubBBox(t,e).multRight(this.matrix)},getMatrix:function(){return this.matrix},traverse:function(t,e){switch(t){case H().CAMERA:case H().PICKING:case H().SHADOW:break;default:this.getBrowser().getScreenScaleMatrix(e,this.matrix)}const i=e.getModelViewMatrix();i.push(),i.multLeft(this.matrix),q().prototype.traverse.call(this,t,e),i.pop()}});const te=$t;e().addComponent({name:"Layout",types:{Layout:j,LayoutGroup:Q,LayoutLayer:it,ScreenFontStyle:Jt,ScreenGroup:te},abstractTypes:{X3DLayoutNode:I},browserContext:f})})()})();